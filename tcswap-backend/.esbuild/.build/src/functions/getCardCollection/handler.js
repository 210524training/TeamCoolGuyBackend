var Ga=Object.create;var rt=Object.defineProperty;var Wa=Object.getOwnPropertyDescriptor;var Ha=Object.getOwnPropertyNames;var $a=Object.getPrototypeOf,Va=Object.prototype.hasOwnProperty;var Sn=t=>rt(t,"__esModule",{value:!0});var d=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),za=(t,e)=>{Sn(t);for(var r in e)rt(t,r,{get:e[r],enumerable:!0})},Ya=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ha(e))!Va.call(t,n)&&n!=="default"&&rt(t,n,{get:()=>e[n],enumerable:!(r=Wa(e,n))||r.enumerable});return t},Ft=t=>Ya(Sn(rt(t!=null?Ga($a(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Cn=d(Ut=>{var En="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Ut.encode=function(t){if(0<=t&&t<En.length)return En[t];throw new TypeError("Must be between 0 and 63: "+t)};Ut.decode=function(t){var e=65,r=90,n=97,i=122,s=48,o=57,a=43,u=47,l=26,f=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+l:s<=t&&t<=o?t-s+f:t==a?62:t==u?63:-1}});var Wt=d(Gt=>{var Rn=Cn(),Qt=5,Mn=1<<Qt,Tn=Mn-1,An=Mn;function Ka(t){return t<0?(-t<<1)+1:(t<<1)+0}function Ja(t){var e=(t&1)==1,r=t>>1;return e?-r:r}Gt.encode=function(e){var r="",n,i=Ka(e);do n=i&Tn,i>>>=Qt,i>0&&(n|=An),r+=Rn.encode(n);while(i>0);return r};Gt.decode=function(e,r,n){var i=e.length,s=0,o=0,a,u;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(u=Rn.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(u&An),u&=Tn,s=s+(u<<o),o+=Qt}while(a);n.value=Ja(s),n.rest=r}});var ye=d(L=>{function Xa(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}L.getArg=Xa;var Pn=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Za=/^data:.+\,.+$/;function Ie(t){var e=t.match(Pn);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}L.urlParse=Ie;function ve(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}L.urlGenerate=ve;function Ht(t){var e=t,r=Ie(t);if(r){if(!r.path)return t;e=r.path}for(var n=L.isAbsolute(e),i=e.split(/\/+/),s,o=0,a=i.length-1;a>=0;a--)s=i[a],s==="."?i.splice(a,1):s===".."?o++:o>0&&(s===""?(i.splice(a+1,o),o=0):(i.splice(a,2),o--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,ve(r)):e}L.normalize=Ht;function On(t,e){t===""&&(t="."),e===""&&(e=".");var r=Ie(e),n=Ie(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),ve(r);if(r||e.match(Za))return e;if(n&&!n.host&&!n.path)return n.host=e,ve(n);var i=e.charAt(0)==="/"?e:Ht(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,ve(n)):i}L.join=On;L.isAbsolute=function(t){return t.charAt(0)==="/"||Pn.test(t)};function eu(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}L.relative=eu;var Ln=function(){var t=Object.create(null);return!("__proto__"in t)}();function xn(t){return t}function tu(t){return qn(t)?"$"+t:t}L.toSetString=Ln?xn:tu;function ru(t){return qn(t)?t.slice(1):t}L.fromSetString=Ln?xn:ru;function qn(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function nu(t,e,r){var n=me(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:me(t.name,e.name)}L.compareByOriginalPositions=nu;function iu(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=me(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:me(t.name,e.name)}L.compareByGeneratedPositionsDeflated=iu;function me(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function su(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=me(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:me(t.name,e.name)}L.compareByGeneratedPositionsInflated=su;function ou(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}L.parseSourceMapInput=ou;function au(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=Ie(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=On(ve(n),e)}return Ht(e)}L.computeSourceURL=au});var zt=d(In=>{var $t=ye(),Vt=Object.prototype.hasOwnProperty,oe=typeof Map!="undefined";function V(){this._array=[],this._set=oe?new Map:Object.create(null)}V.fromArray=function(e,r){for(var n=new V,i=0,s=e.length;i<s;i++)n.add(e[i],r);return n};V.prototype.size=function(){return oe?this._set.size:Object.getOwnPropertyNames(this._set).length};V.prototype.add=function(e,r){var n=oe?e:$t.toSetString(e),i=oe?this.has(e):Vt.call(this._set,n),s=this._array.length;(!i||r)&&this._array.push(e),i||(oe?this._set.set(e,s):this._set[n]=s)};V.prototype.has=function(e){if(oe)return this._set.has(e);var r=$t.toSetString(e);return Vt.call(this._set,r)};V.prototype.indexOf=function(e){if(oe){var r=this._set.get(e);if(r>=0)return r}else{var n=$t.toSetString(e);if(Vt.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};V.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};V.prototype.toArray=function(){return this._array.slice()};In.ArraySet=V});var kn=d(Nn=>{var Dn=ye();function uu(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,s=e.generatedColumn;return n>r||n==r&&s>=i||Dn.compareByGeneratedPositionsInflated(t,e)<=0}function nt(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}nt.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};nt.prototype.add=function(e){uu(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};nt.prototype.toArray=function(){return this._sorted||(this._array.sort(Dn.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Nn.MappingList=nt});var Yt=d(Bn=>{var De=Wt(),T=ye(),it=zt().ArraySet,lu=kn().MappingList;function k(t){t||(t={}),this._file=T.getArg(t,"file",null),this._sourceRoot=T.getArg(t,"sourceRoot",null),this._skipValidation=T.getArg(t,"skipValidation",!1),this._sources=new it,this._names=new it,this._mappings=new lu,this._sourcesContents=null}k.prototype._version=3;k.fromSourceMap=function(e){var r=e.sourceRoot,n=new k({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var s={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(s.source=i.source,r!=null&&(s.source=T.relative(r,s.source)),s.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(s.name=i.name)),n.addMapping(s)}),e.sources.forEach(function(i){var s=i;r!==null&&(s=T.relative(r,i)),n._sources.has(s)||n._sources.add(s);var o=e.sourceContentFor(i);o!=null&&n.setSourceContent(i,o)}),n};k.prototype.addMapping=function(e){var r=T.getArg(e,"generated"),n=T.getArg(e,"original",null),i=T.getArg(e,"source",null),s=T.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,s),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:s})};k.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=T.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[T.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[T.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};k.prototype.applySourceMap=function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var s=this._sourceRoot;s!=null&&(i=T.relative(s,i));var o=new it,a=new it;this._mappings.unsortedForEach(function(u){if(u.source===i&&u.originalLine!=null){var l=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});l.source!=null&&(u.source=l.source,n!=null&&(u.source=T.join(n,u.source)),s!=null&&(u.source=T.relative(s,u.source)),u.originalLine=l.line,u.originalColumn=l.column,l.name!=null&&(u.name=l.name))}var f=u.source;f!=null&&!o.has(f)&&o.add(f);var h=u.name;h!=null&&!a.has(h)&&a.add(h)},this),this._sources=o,this._names=a,e.sources.forEach(function(u){var l=e.sourceContentFor(u);l!=null&&(n!=null&&(u=T.join(n,u)),s!=null&&(u=T.relative(s,u)),this.setSourceContent(u,l))},this)};k.prototype._validateMapping=function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}};k.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,i=0,s=0,o=0,a="",u,l,f,h,c=this._mappings.toArray(),g=0,m=c.length;g<m;g++){if(l=c[g],u="",l.generatedLine!==r)for(e=0;l.generatedLine!==r;)u+=";",r++;else if(g>0){if(!T.compareByGeneratedPositionsInflated(l,c[g-1]))continue;u+=","}u+=De.encode(l.generatedColumn-e),e=l.generatedColumn,l.source!=null&&(h=this._sources.indexOf(l.source),u+=De.encode(h-o),o=h,u+=De.encode(l.originalLine-1-i),i=l.originalLine-1,u+=De.encode(l.originalColumn-n),n=l.originalColumn,l.name!=null&&(f=this._names.indexOf(l.name),u+=De.encode(f-s),s=f)),a+=u}return a};k.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=T.relative(r,n));var i=T.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};k.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};k.prototype.toString=function(){return JSON.stringify(this.toJSON())};Bn.SourceMapGenerator=k});var jn=d(ae=>{ae.GREATEST_LOWER_BOUND=1;ae.LEAST_UPPER_BOUND=2;function Kt(t,e,r,n,i,s){var o=Math.floor((e-t)/2)+t,a=i(r,n[o],!0);return a===0?o:a>0?e-o>1?Kt(o,e,r,n,i,s):s==ae.LEAST_UPPER_BOUND?e<n.length?e:-1:o:o-t>1?Kt(t,o,r,n,i,s):s==ae.LEAST_UPPER_BOUND?o:t<0?-1:t}ae.search=function(e,r,n,i){if(r.length===0)return-1;var s=Kt(-1,r.length,e,r,n,i||ae.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&n(r[s],r[s-1],!0)===0;)--s;return s}});var Un=d(Fn=>{function Jt(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function fu(t,e){return Math.round(t+Math.random()*(e-t))}function Xt(t,e,r,n){if(r<n){var i=fu(r,n),s=r-1;Jt(t,i,n);for(var o=t[n],a=r;a<n;a++)e(t[a],o)<=0&&(s+=1,Jt(t,s,a));Jt(t,s+1,a);var u=s+1;Xt(t,e,r,u-1),Xt(t,e,u+1,n)}}Fn.quickSort=function(t,e){Xt(t,e,0,t.length-1)}});var Gn=d(st=>{var p=ye(),Zt=jn(),_e=zt().ArraySet,cu=Wt(),Ne=Un().quickSort;function S(t,e){var r=t;return typeof t=="string"&&(r=p.parseSourceMapInput(t)),r.sections!=null?new G(r,e):new P(r,e)}S.fromSourceMap=function(t,e){return P.fromSourceMap(t,e)};S.prototype._version=3;S.prototype.__generatedMappings=null;Object.defineProperty(S.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});S.prototype.__originalMappings=null;Object.defineProperty(S.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});S.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};S.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};S.GENERATED_ORDER=1;S.ORIGINAL_ORDER=2;S.GREATEST_LOWER_BOUND=1;S.LEAST_UPPER_BOUND=2;S.prototype.eachMapping=function(e,r,n){var i=r||null,s=n||S.GENERATED_ORDER,o;switch(s){case S.GENERATED_ORDER:o=this._generatedMappings;break;case S.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(u){var l=u.source===null?null:this._sources.at(u.source);return l=p.computeSourceURL(a,l,this._sourceMapURL),{source:l,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,i)};S.prototype.allGeneratedPositionsFor=function(e){var r=p.getArg(e,"line"),n={source:p.getArg(e,"source"),originalLine:r,originalColumn:p.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",p.compareByOriginalPositions,Zt.LEAST_UPPER_BOUND);if(s>=0){var o=this._originalMappings[s];if(e.column===void 0)for(var a=o.originalLine;o&&o.originalLine===a;)i.push({line:p.getArg(o,"generatedLine",null),column:p.getArg(o,"generatedColumn",null),lastColumn:p.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++s];else for(var u=o.originalColumn;o&&o.originalLine===r&&o.originalColumn==u;)i.push({line:p.getArg(o,"generatedLine",null),column:p.getArg(o,"generatedColumn",null),lastColumn:p.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++s]}return i};st.SourceMapConsumer=S;function P(t,e){var r=t;typeof t=="string"&&(r=p.parseSourceMapInput(t));var n=p.getArg(r,"version"),i=p.getArg(r,"sources"),s=p.getArg(r,"names",[]),o=p.getArg(r,"sourceRoot",null),a=p.getArg(r,"sourcesContent",null),u=p.getArg(r,"mappings"),l=p.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);o&&(o=p.normalize(o)),i=i.map(String).map(p.normalize).map(function(f){return o&&p.isAbsolute(o)&&p.isAbsolute(f)?p.relative(o,f):f}),this._names=_e.fromArray(s.map(String),!0),this._sources=_e.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(f){return p.computeSourceURL(o,f,e)}),this.sourceRoot=o,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=e,this.file=l}P.prototype=Object.create(S.prototype);P.prototype.consumer=S;P.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=p.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};P.fromSourceMap=function(e,r){var n=Object.create(P.prototype),i=n._names=_e.fromArray(e._names.toArray(),!0),s=n._sources=_e.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(g){return p.computeSourceURL(n.sourceRoot,g,r)});for(var o=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],l=0,f=o.length;l<f;l++){var h=o[l],c=new Qn;c.generatedLine=h.generatedLine,c.generatedColumn=h.generatedColumn,h.source&&(c.source=s.indexOf(h.source),c.originalLine=h.originalLine,c.originalColumn=h.originalColumn,h.name&&(c.name=i.indexOf(h.name)),u.push(c)),a.push(c)}return Ne(n.__originalMappings,p.compareByOriginalPositions),n};P.prototype._version=3;Object.defineProperty(P.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function Qn(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}P.prototype._parseMappings=function(e,r){for(var n=1,i=0,s=0,o=0,a=0,u=0,l=e.length,f=0,h={},c={},g=[],m=[],b,O,w,D,se;f<l;)if(e.charAt(f)===";")n++,f++,i=0;else if(e.charAt(f)===",")f++;else{for(b=new Qn,b.generatedLine=n,D=f;D<l&&!this._charIsMappingSeparator(e,D);D++);if(O=e.slice(f,D),w=h[O],w)f+=O.length;else{for(w=[];f<D;)cu.decode(e,f,c),se=c.value,f=c.rest,w.push(se);if(w.length===2)throw new Error("Found a source, but no line and column");if(w.length===3)throw new Error("Found a source and line, but no column");h[O]=w}b.generatedColumn=i+w[0],i=b.generatedColumn,w.length>1&&(b.source=a+w[1],a+=w[1],b.originalLine=s+w[2],s=b.originalLine,b.originalLine+=1,b.originalColumn=o+w[3],o=b.originalColumn,w.length>4&&(b.name=u+w[4],u+=w[4])),m.push(b),typeof b.originalLine=="number"&&g.push(b)}Ne(m,p.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,Ne(g,p.compareByOriginalPositions),this.__originalMappings=g};P.prototype._findMapping=function(e,r,n,i,s,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return Zt.search(e,r,s,o)};P.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};P.prototype.originalPositionFor=function(e){var r={generatedLine:p.getArg(e,"line"),generatedColumn:p.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",p.compareByGeneratedPositionsDeflated,p.getArg(e,"bias",S.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var s=p.getArg(i,"source",null);s!==null&&(s=this._sources.at(s),s=p.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var o=p.getArg(i,"name",null);return o!==null&&(o=this._names.at(o)),{source:s,line:p.getArg(i,"originalLine",null),column:p.getArg(i,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}};P.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};P.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=p.relative(this.sourceRoot,i));var s;if(this.sourceRoot!=null&&(s=p.urlParse(this.sourceRoot))){var o=i.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!s.path||s.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')};P.prototype.generatedPositionFor=function(e){var r=p.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:p.getArg(e,"line"),originalColumn:p.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",p.compareByOriginalPositions,p.getArg(e,"bias",S.GREATEST_LOWER_BOUND));if(i>=0){var s=this._originalMappings[i];if(s.source===n.source)return{line:p.getArg(s,"generatedLine",null),column:p.getArg(s,"generatedColumn",null),lastColumn:p.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};st.BasicSourceMapConsumer=P;function G(t,e){var r=t;typeof t=="string"&&(r=p.parseSourceMapInput(t));var n=p.getArg(r,"version"),i=p.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new _e,this._names=new _e;var s={line:-1,column:0};this._sections=i.map(function(o){if(o.url)throw new Error("Support for url field in sections not implemented.");var a=p.getArg(o,"offset"),u=p.getArg(a,"line"),l=p.getArg(a,"column");if(u<s.line||u===s.line&&l<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=a,{generatedOffset:{generatedLine:u+1,generatedColumn:l+1},consumer:new S(p.getArg(o,"map"),e)}})}G.prototype=Object.create(S.prototype);G.prototype.constructor=S;G.prototype._version=3;Object.defineProperty(G.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});G.prototype.originalPositionFor=function(e){var r={generatedLine:p.getArg(e,"line"),generatedColumn:p.getArg(e,"column")},n=Zt.search(r,this._sections,function(s,o){var a=s.generatedLine-o.generatedOffset.generatedLine;return a||s.generatedColumn-o.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};G.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};G.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],s=i.consumer.sourceContentFor(e,!0);if(s)return s}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};G.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(p.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var s={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}};G.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],s=i.consumer._generatedMappings,o=0;o<s.length;o++){var a=s[o],u=i.consumer._sources.at(a.source);u=p.computeSourceURL(i.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var l=null;a.name&&(l=i.consumer._names.at(a.name),this._names.add(l),l=this._names.indexOf(l));var f={source:u,generatedLine:a.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(i.generatedOffset.generatedLine===a.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:l};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}Ne(this.__generatedMappings,p.compareByGeneratedPositionsDeflated),Ne(this.__originalMappings,p.compareByOriginalPositions)};st.IndexedSourceMapConsumer=G});var Hn=d(Wn=>{var hu=Yt().SourceMapGenerator,ot=ye(),du=/(\r?\n)/,pu=10,be="$$$isSourceNode$$$";function N(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t==null?null:t,this.column=e==null?null:e,this.source=r==null?null:r,this.name=i==null?null:i,this[be]=!0,n!=null&&this.add(n)}N.fromStringWithSourceMap=function(e,r,n){var i=new N,s=e.split(du),o=0,a=function(){var c=m(),g=m()||"";return c+g;function m(){return o<s.length?s[o++]:void 0}},u=1,l=0,f=null;return r.eachMapping(function(c){if(f!==null)if(u<c.generatedLine)h(f,a()),u++,l=0;else{var g=s[o]||"",m=g.substr(0,c.generatedColumn-l);s[o]=g.substr(c.generatedColumn-l),l=c.generatedColumn,h(f,m),f=c;return}for(;u<c.generatedLine;)i.add(a()),u++;if(l<c.generatedColumn){var g=s[o]||"";i.add(g.substr(0,c.generatedColumn)),s[o]=g.substr(c.generatedColumn),l=c.generatedColumn}f=c},this),o<s.length&&(f&&h(f,a()),i.add(s.splice(o).join(""))),r.sources.forEach(function(c){var g=r.sourceContentFor(c);g!=null&&(n!=null&&(c=ot.join(n,c)),i.setSourceContent(c,g))}),i;function h(c,g){if(c===null||c.source===void 0)i.add(g);else{var m=n?ot.join(n,c.source):c.source;i.add(new N(c.originalLine,c.originalColumn,m,g,c.name))}}};N.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[be]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};N.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[be]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};N.prototype.walk=function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[be]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};N.prototype.join=function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};N.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[be]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};N.prototype.setSourceContent=function(e,r){this.sourceContents[ot.toSetString(e)]=r};N.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][be]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(ot.fromSetString(i[r]),this.sourceContents[i[r]])};N.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};N.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new hu(e),i=!1,s=null,o=null,a=null,u=null;return this.walk(function(l,f){r.code+=l,f.source!==null&&f.line!==null&&f.column!==null?((s!==f.source||o!==f.line||a!==f.column||u!==f.name)&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),s=f.source,o=f.line,a=f.column,u=f.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),s=null,i=!1);for(var h=0,c=l.length;h<c;h++)l.charCodeAt(h)===pu?(r.line++,r.column=0,h+1===c?(s=null,i=!1):i&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(l,f){n.setSourceContent(l,f)}),{code:r.code,map:n}};Wn.SourceNode=N});var $n=d(at=>{at.SourceMapGenerator=Yt().SourceMapGenerator;at.SourceMapConsumer=Gn().SourceMapConsumer;at.SourceNode=Hn().SourceNode});var zn=d((Xd,Vn)=>{var gu=Object.prototype.toString,er=typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function vu(t){return gu.call(t).slice(8,-1)==="ArrayBuffer"}function mu(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return er?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function yu(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return er?Buffer.from(t,e):new Buffer(t,e)}function _u(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return vu(t)?mu(t,e,r):typeof t=="string"?yu(t,e):er?Buffer.from(t):new Buffer(t)}Vn.exports=_u});var ri=d((le,ur)=>{var bu=$n().SourceMapConsumer,tr=require("path"),W;try{W=require("fs"),(!W.existsSync||!W.readFileSync)&&(W=null)}catch(t){}var wu=zn();function Yn(t,e){return t.require(e)}var Kn=!1,Jn=!1,rr=!1,ke="auto",ue={},Be={},Su=/^data:application\/json[^,]+base64,/,K=[],J=[];function nr(){return ke==="browser"?!0:ke==="node"?!1:typeof window!="undefined"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function Eu(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function ut(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}var ir=ut(K);K.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in ue)return ue[t];var e="";try{if(W)W.existsSync(t)&&(e=W.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch(n){}return ue[t]=e});function sr(t,e){if(!t)return e;var r=tr.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",s=r.slice(i.length);return i&&/^\/\w\:/.test(s)?(i+="/",i+tr.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+tr.resolve(r.slice(i.length),e)}function Cu(t){var e;if(nr())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch(a){}e=ir(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,s,o;o=i.exec(e);)s=o;return s?s[1]:null}var or=ut(J);J.push(function(t){var e=Cu(t);if(!e)return null;var r;if(Su.test(e)){var n=e.slice(e.indexOf(",")+1);r=wu(n,"base64").toString(),e=t}else e=sr(t,e),r=ir(e);return r?{url:e,map:r}:null});function ar(t){var e=Be[t.source];if(!e){var r=or(t.source);r?(e=Be[t.source]={url:r.url,map:new bu(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,s){var o=e.map.sourcesContent[s];if(o){var a=sr(e.url,i);ue[a]=o}})):e=Be[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=sr(e.url,n.source),n}return t}function Xn(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=ar({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+Xn(e[2])+")":t}function Ru(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",s=this.getFunctionName(),o=!0,a=this.isConstructor(),u=!(this.isToplevel()||a);if(u){var l=this.getTypeName();l==="[object Object]"&&(l="null");var f=this.getMethodName();s?(l&&s.indexOf(l)!=0&&(i+=l+"."),i+=s,f&&s.indexOf("."+f)!=s.length-f.length-1&&(i+=" [as "+f+"]")):i+=l+"."+(f||"<anonymous>")}else a?i+="new "+(s||"<anonymous>"):s?i+=s:(i+=e,o=!1);return o&&(i+=" ("+e+")"),i}function Zn(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=Ru,e}function ei(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,s=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,o=s.test(process.version)?0:62;n===1&&i>o&&!nr()&&!t.isEval()&&(i-=o);var a=ar({source:r,line:n,column:i});e.curPosition=a,t=Zn(t);var u=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?u():e.nextPosition.name||u()},t.getFileName=function(){return a.source},t.getLineNumber=function(){return a.line},t.getColumnNumber=function(){return a.column+1},t.getScriptNameOrSourceURL=function(){return a.source},t}var l=t.isEval()&&t.getEvalOrigin();return l&&(l=Xn(l),t=Zn(t),t.getEvalOrigin=function(){return l}),t}function Mu(t,e){rr&&(ue={},Be={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,s={nextPosition:null,curPosition:null},o=[],a=e.length-1;a>=0;a--)o.push(`
    at `+ei(e[a],s)),s.nextPosition=s.curPosition;return s.curPosition=s.nextPosition=null,i+o.reverse().join("")}function ti(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],s=ue[r];if(!s&&W&&W.existsSync(r))try{s=W.readFileSync(r,"utf8")}catch(a){s=""}if(s){var o=s.split(/(?:\r\n|\r|\n)/)[n-1];if(o)return r+":"+n+`
`+o+`
`+new Array(i).join(" ")+"^"}}return null}function Tu(t){var e=ti(t);process.stderr._handle&&process.stderr._handle.setBlocking&&process.stderr._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),process.exit(1)}function Au(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return Tu(arguments[1])}return t.apply(this,arguments)}}var Pu=K.slice(0),Ou=J.slice(0);le.wrapCallSite=ei;le.getErrorSource=ti;le.mapSourcePosition=ar;le.retrieveSourceMap=or;le.install=function(t){if(t=t||{},t.environment&&(ke=t.environment,["node","browser","auto"].indexOf(ke)===-1))throw new Error("environment "+ke+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(K.length=0),K.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(J.length=0),J.unshift(t.retrieveSourceMap)),t.hookRequire&&!nr()){var e=Yn(ur,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(s,o){return ue[o]=s,Be[o]=void 0,r.call(this,s,o)},e.prototype._compile.__sourceMapSupport=!0)}if(rr||(rr="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),Kn||(Kn=!0,Error.prepareStackTrace=Mu),!Jn){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=Yn(ur,"worker_threads");i.isMainThread===!1&&(n=!1)}catch(s){}n&&Eu()&&(Jn=!0,Au())}};le.resetRetrieveHandlers=function(){K.length=0,J.length=0,K=Pu.slice(0),J=Ou.slice(0),or=ut(J),ir=ut(K)}});var lr=d(ni=>{"use strict";ni.parse=function(t,e){return new lt(t,e).parse()};var lt=class{constructor(e,r){this.source=e,this.transform=r||Lu,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&(r=this.recorded.join(""),r==="NULL"&&!e&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var r,n,i;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!i)this.dimension++,this.dimension>1&&(n=new lt(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else r.value==='"'&&!r.escaped?(i&&this.newEntry(!0),i=!i):r.value===","&&!i?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function Lu(t){return t}});var fr=d((tp,ii)=>{var xu=lr();ii.exports={create:function(t,e){return{parse:function(){return xu.parse(t,e)}}}}});var ai=d((rp,oi)=>{"use strict";var qu=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,Iu=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,Du=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,Nu=/^-?infinity$/;oi.exports=function(e){if(Nu.test(e))return Number(e.replace("i","I"));var r=qu.exec(e);if(!r)return ku(e)||null;var n=!!r[8],i=parseInt(r[1],10);n&&(i=si(i));var s=parseInt(r[2],10)-1,o=r[3],a=parseInt(r[4],10),u=parseInt(r[5],10),l=parseInt(r[6],10),f=r[7];f=f?1e3*parseFloat(f):0;var h,c=Bu(e);return c!=null?(h=new Date(Date.UTC(i,s,o,a,u,l,f)),cr(i)&&h.setUTCFullYear(i),c!==0&&h.setTime(h.getTime()-c)):(h=new Date(i,s,o,a,u,l,f),cr(i)&&h.setFullYear(i)),h};function ku(t){var e=Iu.exec(t);if(!!e){var r=parseInt(e[1],10),n=!!e[4];n&&(r=si(r));var i=parseInt(e[2],10)-1,s=e[3],o=new Date(r,i,s);return cr(r)&&o.setFullYear(r),o}}function Bu(t){if(t.endsWith("+00"))return 0;var e=Du.exec(t.split(" ")[1]);if(!!e){var r=e[1];if(r==="Z")return 0;var n=r==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*n*1e3}}function si(t){return-(t-1)}function cr(t){return t>=0&&t<100}});var li=d((np,ui)=>{ui.exports=Fu;var ju=Object.prototype.hasOwnProperty;function Fu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)ju.call(r,n)&&(t[n]=r[n])}return t}});var hi=d((ip,ci)=>{"use strict";var Uu=li();ci.exports=we;function we(t){if(!(this instanceof we))return new we(t);Uu(this,Zu(t))}var Qu=["seconds","minutes","hours","days","months","years"];we.prototype.toPostgres=function(){var t=Qu.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var r=this[e]||0;return e==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var Gu={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},Wu=["years","months","days"],Hu=["hours","minutes","seconds"];we.prototype.toISOString=we.prototype.toISO=function(){var t=Wu.map(r,this).join(""),e=Hu.map(r,this).join("");return"P"+t+"T"+e;function r(n){var i=this[n]||0;return n==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+Gu[n]}};var hr="([+-]?\\d+)",$u=hr+"\\s+years?",Vu=hr+"\\s+mons?",zu=hr+"\\s+days?",Yu="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",Ku=new RegExp([$u,Vu,zu,Yu].map(function(t){return"("+t+")?"}).join("\\s*")),fi={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},Ju=["hours","minutes","seconds","milliseconds"];function Xu(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function Zu(t){if(!t)return{};var e=Ku.exec(t),r=e[8]==="-";return Object.keys(fi).reduce(function(n,i){var s=fi[i],o=e[s];return!o||(o=i==="milliseconds"?Xu(o):parseInt(o,10),!o)||(r&&~Ju.indexOf(i)&&(o*=-1),n[i]=o),n},{})}});var pi=d((sp,di)=>{"use strict";di.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var r="",n=0;n<e.length;)if(e[n]!=="\\")r+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))r+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var i=1;n+i<e.length&&e[n+i]==="\\";)i++;for(var s=0;s<Math.floor(i/2);++s)r+="\\";n+=Math.floor(i/2)*2}return new Buffer(r,"binary")}});var wi=d((op,bi)=>{var je=lr(),Fe=fr(),ft=ai(),gi=hi(),vi=pi();function ct(t){return function(r){return r===null?r:t(r)}}function mi(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function el(t){return t?je.parse(t,mi):null}function tl(t){return parseInt(t,10)}function dr(t){return t?je.parse(t,ct(tl)):null}function rl(t){return t?je.parse(t,ct(function(e){return yi(e).trim()})):null}var nl=function(t){if(!t)return null;var e=Fe.create(t,function(r){return r!==null&&(r=mr(r)),r});return e.parse()},pr=function(t){if(!t)return null;var e=Fe.create(t,function(r){return r!==null&&(r=parseFloat(r)),r});return e.parse()},B=function(t){if(!t)return null;var e=Fe.create(t);return e.parse()},gr=function(t){if(!t)return null;var e=Fe.create(t,function(r){return r!==null&&(r=ft(r)),r});return e.parse()},il=function(t){if(!t)return null;var e=Fe.create(t,function(r){return r!==null&&(r=gi(r)),r});return e.parse()},sl=function(t){return t?je.parse(t,ct(vi)):null},vr=function(t){return parseInt(t,10)},yi=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},_i=function(t){return t?je.parse(t,ct(JSON.parse)):null},mr=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},ol=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",r="",n=!1,i=2;i<t.length-1;i++){if(n||(e+=t[i]),t[i]===")"){n=!0;continue}else if(!n)continue;t[i]!==","&&(r+=t[i])}var s=mr(e);return s.radius=parseFloat(r),s},al=function(t){t(20,yi),t(21,vr),t(23,vr),t(26,vr),t(700,parseFloat),t(701,parseFloat),t(16,mi),t(1082,ft),t(1114,ft),t(1184,ft),t(600,mr),t(651,B),t(718,ol),t(1e3,el),t(1001,sl),t(1005,dr),t(1007,dr),t(1028,dr),t(1016,rl),t(1017,nl),t(1021,pr),t(1022,pr),t(1231,pr),t(1014,B),t(1015,B),t(1008,B),t(1009,B),t(1040,B),t(1041,B),t(1115,gr),t(1182,gr),t(1185,gr),t(1186,gi),t(1187,il),t(17,vi),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,_i),t(3807,_i),t(3907,B),t(2951,B),t(791,B),t(1183,B),t(1270,B)};bi.exports={init:al}});var Ei=d((ap,Si)=>{"use strict";var q=1e6;function ul(t){var e=t.readInt32BE(0),r=t.readUInt32BE(4),n="";e<0&&(e=~e+(r===0),r=~r+1>>>0,n="-");var i="",s,o,a,u,l,f;{if(s=e%q,e=e/q>>>0,o=4294967296*s+r,r=o/q>>>0,a=""+(o-q*r),r===0&&e===0)return n+a+i;for(u="",l=6-a.length,f=0;f<l;f++)u+="0";i=u+a+i}{if(s=e%q,e=e/q>>>0,o=4294967296*s+r,r=o/q>>>0,a=""+(o-q*r),r===0&&e===0)return n+a+i;for(u="",l=6-a.length,f=0;f<l;f++)u+="0";i=u+a+i}{if(s=e%q,e=e/q>>>0,o=4294967296*s+r,r=o/q>>>0,a=""+(o-q*r),r===0&&e===0)return n+a+i;for(u="",l=6-a.length,f=0;f<l;f++)u+="0";i=u+a+i}return s=e%q,o=4294967296*s+r,a=""+o%q,n+a+i}Si.exports=ul});var Ai=d((up,Ti)=>{var ll=Ei(),E=function(t,e,r,n,i){r=r||0,n=n||!1,i=i||function(g,m,b){return g*Math.pow(2,b)+m};var s=r>>3,o=function(g){return n?~g&255:g},a=255,u=8-r%8;e<u&&(a=255<<8-e&255,u=e),r&&(a=a>>r%8);var l=0;r%8+e>=8&&(l=i(0,o(t[s])&a,u));for(var f=e+r>>3,h=s+1;h<f;h++)l=i(l,o(t[h]),8);var c=(e+r)%8;return c>0&&(l=i(l,o(t[f])>>8-c,c)),l},Ci=function(t,e,r){var n=Math.pow(2,r-1)-1,i=E(t,1),s=E(t,r,1);if(s===0)return 0;var o=1,a=function(l,f,h){l===0&&(l=1);for(var c=1;c<=h;c++)o/=2,(f&1<<h-c)>0&&(l+=o);return l},u=E(t,e,r+1,!1,a);return s==Math.pow(2,r+1)-1?u===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,s-n)*u},fl=function(t){return E(t,1)==1?-1*(E(t,15,1,!0)+1):E(t,15,1)},Ri=function(t){return E(t,1)==1?-1*(E(t,31,1,!0)+1):E(t,31,1)},cl=function(t){return Ci(t,23,8)},hl=function(t){return Ci(t,52,11)},dl=function(t){var e=E(t,16,32);if(e==49152)return NaN;for(var r=Math.pow(1e4,E(t,16,16)),n=0,i=[],s=E(t,16),o=0;o<s;o++)n+=E(t,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,E(t,16,48));return(e===0?1:-1)*Math.round(n*a)/a},Mi=function(t,e){var r=E(e,1),n=E(e,63,1),i=new Date((r===0?1:-1)*n/1e3+9466848e5);return t||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=n%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(s){this.usec=s},i.getUTCMicroSeconds=function(){return this.usec},i},Ue=function(t){for(var e=E(t,32),r=E(t,32,32),n=E(t,32,64),i=96,s=[],o=0;o<e;o++)s[o]=E(t,32,i),i+=32,i+=32;var a=function(l){var f=E(t,32,i);if(i+=32,f==4294967295)return null;var h;if(l==23||l==20)return h=E(t,f*8,i),i+=f*8,h;if(l==25)return h=t.toString(this.encoding,i>>3,(i+=f<<3)>>3),h;console.log("ERROR: ElementType not implemented: "+l)},u=function(l,f){var h=[],c;if(l.length>1){var g=l.shift();for(c=0;c<g;c++)h[c]=u(l,f);l.unshift(g)}else for(c=0;c<l[0];c++)h[c]=a(f);return h};return u(s,n)},pl=function(t){return t.toString("utf8")},gl=function(t){return t===null?null:E(t,8)>0},vl=function(t){t(20,ll),t(21,fl),t(23,Ri),t(26,Ri),t(1700,dl),t(700,cl),t(701,hl),t(16,gl),t(1114,Mi.bind(null,!1)),t(1184,Mi.bind(null,!0)),t(1e3,Ue),t(1007,Ue),t(1016,Ue),t(1008,Ue),t(1009,Ue),t(25,pl)};Ti.exports={init:vl}});var Oi=d((lp,Pi)=>{Pi.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var We=d(Ge=>{var ml=wi(),yl=Ai(),_l=fr(),bl=Oi();Ge.getTypeParser=wl;Ge.setTypeParser=Sl;Ge.arrayParser=_l;Ge.builtins=bl;var Qe={text:{},binary:{}};function Li(t){return String(t)}function wl(t,e){return e=e||"text",Qe[e]&&Qe[e][t]||Li}function Sl(t,e,r){typeof e=="function"&&(r=e,e="text"),Qe[e][t]=r}ml.init(function(t,e){Qe.text[t]=e});yl.init(function(t,e){Qe.binary[t]=e})});var He=d((cp,yr)=>{"use strict";yr.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Se=We(),El=Se.getTypeParser(20,"text"),Cl=Se.getTypeParser(1016,"text");yr.exports.__defineSetter__("parseInt8",function(t){Se.setTypeParser(20,"text",t?Se.getTypeParser(23,"text"):El),Se.setTypeParser(1016,"text",t?Se.getTypeParser(1007,"text"):Cl)})});var dt=d((hp,qi)=>{"use strict";var Rl=require("crypto"),Ml=He();function Tl(t){var e=t.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+e+'"'}function xi(t){for(var e="{",r=0;r<t.length;r++)r>0&&(e=e+","),t[r]===null||typeof t[r]=="undefined"?e=e+"NULL":Array.isArray(t[r])?e=e+xi(t[r]):t[r]instanceof Buffer?e+="\\\\x"+t[r].toString("hex"):e+=Tl(ht(t[r]));return e=e+"}",e}var ht=function(t,e){if(t==null)return null;if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){var r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return r.length===t.byteLength?r:r.slice(t.byteOffset,t.byteOffset+t.byteLength)}return t instanceof Date?Ml.parseInputDatesAsUTC?Ol(t):Pl(t):Array.isArray(t)?xi(t):typeof t=="object"?Al(t,e):t.toString()};function Al(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),ht(t.toPostgres(ht),e)}return JSON.stringify(t)}function x(t,e){for(t=""+t;t.length<e;)t="0"+t;return t}function Pl(t){var e=-t.getTimezoneOffset(),r=t.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var i=x(r,4)+"-"+x(t.getMonth()+1,2)+"-"+x(t.getDate(),2)+"T"+x(t.getHours(),2)+":"+x(t.getMinutes(),2)+":"+x(t.getSeconds(),2)+"."+x(t.getMilliseconds(),3);return e<0?(i+="-",e*=-1):i+="+",i+=x(Math.floor(e/60),2)+":"+x(e%60,2),n&&(i+=" BC"),i}function Ol(t){var e=t.getUTCFullYear(),r=e<1;r&&(e=Math.abs(e)+1);var n=x(e,4)+"-"+x(t.getUTCMonth()+1,2)+"-"+x(t.getUTCDate(),2)+"T"+x(t.getUTCHours(),2)+":"+x(t.getUTCMinutes(),2)+":"+x(t.getUTCSeconds(),2)+"."+x(t.getUTCMilliseconds(),3);return n+="+00:00",r&&(n+=" BC"),n}function Ll(t,e,r){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),r&&(t.callback=r),t}var _r=function(t){return Rl.createHash("md5").update(t,"utf-8").digest("hex")},xl=function(t,e,r){var n=_r(e+t),i=_r(Buffer.concat([Buffer.from(n),r]));return"md5"+i};qi.exports={prepareValue:function(e){return ht(e)},normalizeQueryConfig:Ll,postgresMd5PasswordHash:xl,md5:_r}});var Bi=d((dp,ki)=>{"use strict";var br=require("crypto");function ql(t){if(t.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let e=br.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:e,response:"n,,n=*,r="+e,message:"SASLInitialResponse"}}function Il(t,e,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let n=kl(r);if(n.nonce.startsWith(t.clientNonce)){if(n.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var i=Buffer.from(n.salt,"base64"),s=Fl(e,i,n.iteration),o=Ee(s,"Client Key"),a=jl(o),u="n=*,r="+t.clientNonce,l="r="+n.nonce+",s="+n.salt+",i="+n.iteration,f="c=biws,r="+n.nonce,h=u+","+l+","+f,c=Ee(a,h),g=Ni(o,c),m=g.toString("base64"),b=Ee(s,"Server Key"),O=Ee(b,h);t.message="SASLResponse",t.serverSignature=O.toString("base64"),t.response=f+",p="+m}function Dl(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=Bl(e);if(r!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function Nl(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,r)=>t.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function Ii(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function Di(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let r=e[0],n=e.substring(2);return[r,n]}))}function kl(t){let e=Di(t),r=e.get("r");if(r){if(!Nl(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=e.get("s");if(n){if(!Ii(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let s=parseInt(i,10);return{nonce:r,salt:n,iteration:s}}function Bl(t){let r=Di(t).get("v");if(r){if(!Ii(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function Ni(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((r,n)=>t[n]^e[n]))}function jl(t){return br.createHash("sha256").update(t).digest()}function Ee(t,e){return br.createHmac("sha256",t).update(e).digest()}function Fl(t,e,r){for(var n=Ee(t,Buffer.concat([e,Buffer.from([0,0,0,1])])),i=n,s=0;s<r-1;s++)n=Ee(t,n),i=Ni(i,n);return i}ki.exports={startSession:ql,continueSession:Il,finalizeSession:Dl}});var wr=d((pp,ji)=>{ji.exports=require("stream")});var Gi=d((gp,Qi)=>{"use strict";function Fi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ul(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fi(Object(r),!0).forEach(function(n){Ql(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fi(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ql(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wl(t,e,r){return e&&Ui(t.prototype,e),r&&Ui(t,r),t}var Hl=require("buffer"),pt=Hl.Buffer,$l=require("util"),Sr=$l.inspect,Vl=Sr&&Sr.custom||"inspect";function zl(t,e,r){pt.prototype.copy.call(t,e,r)}Qi.exports=function(){function t(){Gl(this,t),this.head=null,this.tail=null,this.length=0}return Wl(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return pt.alloc(0);for(var n=pt.allocUnsafe(r>>>0),i=this.head,s=0;i;)zl(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=pt.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:Vl,value:function(r,n){return Sr(this,Ul({},n,{depth:0,customInspect:!1}))}}]),t}()});var Cr=d((vp,Hi)=>{"use strict";function Yl(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Er,this,t)):process.nextTick(Er,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(gt,r):(r._writableState.errorEmitted=!0,process.nextTick(Wi,r,s)):process.nextTick(Wi,r,s):e?(process.nextTick(gt,r),e(s)):process.nextTick(gt,r)}),this)}function Wi(t,e){Er(t,e),gt(t)}function gt(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Kl(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Er(t,e){t.emit("error",e)}function Jl(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}Hi.exports={destroy:Yl,undestroy:Kl,errorOrDestroy:Jl}});var X=d((mp,zi)=>{"use strict";var $i={};function j(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,u){super(n(o,a,u))}}i.prototype.name=r.name,i.prototype.code=t,$i[t]=i}function Vi(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function Xl(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Zl(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function ef(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}j("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);j("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&Xl(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(Zl(t," argument"))i=`The ${t} ${n} ${Vi(e,"type")}`;else{let s=ef(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${Vi(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);j("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");j("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});j("ERR_STREAM_PREMATURE_CLOSE","Premature close");j("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});j("ERR_MULTIPLE_CALLBACK","Callback called multiple times");j("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");j("ERR_STREAM_WRITE_AFTER_END","write after end");j("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);j("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);j("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");zi.exports.codes=$i});var Rr=d((yp,Yi)=>{"use strict";var tf=X().codes.ERR_INVALID_OPT_VALUE;function rf(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function nf(t,e,r,n){var i=rf(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new tf(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}Yi.exports={getHighWaterMark:nf}});var Ki=d((_p,Mr)=>{typeof Object.create=="function"?Mr.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Mr.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var fe=d((bp,Ar)=>{try{if(Tr=require("util"),typeof Tr.inherits!="function")throw"";Ar.exports=Tr.inherits}catch(t){Ar.exports=Ki()}var Tr});var Xi=d((wp,Ji)=>{Ji.exports=require("util").deprecate});var Lr=d((Sp,is)=>{"use strict";is.exports=R;function Zi(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Lf(e,t)}}var Ce;R.WritableState=$e;var sf={deprecate:Xi()},es=wr(),vt=require("buffer").Buffer,of=global.Uint8Array||function(){};function af(t){return vt.from(t)}function uf(t){return vt.isBuffer(t)||t instanceof of}var Pr=Cr(),lf=Rr(),ff=lf.getHighWaterMark,Z=X().codes,cf=Z.ERR_INVALID_ARG_TYPE,hf=Z.ERR_METHOD_NOT_IMPLEMENTED,df=Z.ERR_MULTIPLE_CALLBACK,pf=Z.ERR_STREAM_CANNOT_PIPE,gf=Z.ERR_STREAM_DESTROYED,vf=Z.ERR_STREAM_NULL_VALUES,mf=Z.ERR_STREAM_WRITE_AFTER_END,yf=Z.ERR_UNKNOWN_ENCODING,Re=Pr.errorOrDestroy;fe()(R,es);function _f(){}function $e(t,e,r){Ce=Ce||ce(),t=t||{},typeof r!="boolean"&&(r=e instanceof Ce),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=ff(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Mf(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Zi(this)}$e.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty($e.prototype,"buffer",{get:sf.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}})();var mt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(mt=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(e){return mt.call(this,e)?!0:this!==R?!1:e&&e._writableState instanceof $e}})):mt=function(e){return e instanceof this};function R(t){Ce=Ce||ce();var e=this instanceof Ce;if(!e&&!mt.call(R,this))return new R(t);this._writableState=new $e(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),es.call(this)}R.prototype.pipe=function(){Re(this,new pf)};function bf(t,e){var r=new mf;Re(t,r),process.nextTick(e,r)}function wf(t,e,r,n){var i;return r===null?i=new vf:typeof r!="string"&&!e.objectMode&&(i=new cf("chunk",["string","Buffer"],r)),i?(Re(t,i),process.nextTick(n,i),!1):!0}R.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&uf(t);return s&&!vt.isBuffer(t)&&(t=af(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=_f),n.ending?bf(this,r):(s||wf(this,n,t,r))&&(n.pendingcb++,i=Ef(this,n,s,t,e,r)),i};R.prototype.cork=function(){this._writableState.corked++};R.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&rs(this,t))};R.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new yf(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Sf(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=vt.from(e,r)),e}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ef(t,e,r,n,i,s){if(!r){var o=Sf(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Or(t,e,!1,a,n,i,s);return u}function Or(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new gf("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Cf(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(Ve,t,e),t._writableState.errorEmitted=!0,Re(t,n)):(i(n),t._writableState.errorEmitted=!0,Re(t,n),Ve(t,e))}function Rf(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Mf(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new df;if(Rf(r),e)Cf(t,r,n,e,i);else{var s=ns(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&rs(t,r),n?process.nextTick(ts,t,r,s,i):ts(t,r,s,i)}}function ts(t,e,r,n){r||Tf(t,e),e.pendingcb--,n(),Ve(t,e)}function Tf(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function rs(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,Or(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new Zi(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,f=r.callback,h=e.objectMode?1:u.length;if(Or(t,e,!1,h,u,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}R.prototype._write=function(t,e,r){r(new hf("_write()"))};R.prototype._writev=null;R.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Of(this,n,r),this};Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ns(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Af(t,e){t._final(function(r){e.pendingcb--,r&&Re(t,r),e.prefinished=!0,t.emit("prefinish"),Ve(t,e)})}function Pf(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Af,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Ve(t,e){var r=ns(e);if(r&&(Pf(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Of(t,e,r){e.ending=!0,Ve(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Lf(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});R.prototype.destroy=Pr.destroy;R.prototype._undestroy=Pr.undestroy;R.prototype._destroy=function(t,e){e(t)}});var ce=d((Ep,os)=>{"use strict";var xf=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};os.exports=H;var ss=Ir(),xr=Lr();fe()(H,ss);for(qr=xf(xr.prototype),yt=0;yt<qr.length;yt++)_t=qr[yt],H.prototype[_t]||(H.prototype[_t]=xr.prototype[_t]);var qr,_t,yt;function H(t){if(!(this instanceof H))return new H(t);ss.call(this,t),xr.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",qf)))}Object.defineProperty(H.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(H.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(H.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function qf(){this._writableState.ended||process.nextTick(If,this)}function If(t){t.end()}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var bt=d((Cp,ls)=>{"use strict";var as=X().codes.ERR_STREAM_PREMATURE_CLOSE;function Df(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function Nf(){}function kf(t){return t.setHeader&&typeof t.abort=="function"}function us(t,e,r){if(typeof e=="function")return us(t,null,e);e||(e={}),r=Df(r||Nf);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,u=!0,i||r.call(t)},f=function(m){r.call(t,m)},h=function(){var m;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(m=new as),r.call(t,m);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(m=new as),r.call(t,m)},c=function(){t.req.on("finish",a)};return kf(t)?(t.on("complete",a),t.on("abort",h),t.req?c():t.on("request",c)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",h),function(){t.removeListener("complete",a),t.removeListener("abort",h),t.removeListener("request",c),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",h)}}ls.exports=us});var cs=d((Rp,fs)=>{"use strict";var wt;function ee(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Bf=bt(),te=Symbol("lastResolve"),he=Symbol("lastReject"),ze=Symbol("error"),St=Symbol("ended"),de=Symbol("lastPromise"),Dr=Symbol("handlePromise"),pe=Symbol("stream");function re(t,e){return{value:t,done:e}}function jf(t){var e=t[te];if(e!==null){var r=t[pe].read();r!==null&&(t[de]=null,t[te]=null,t[he]=null,e(re(r,!1)))}}function Ff(t){process.nextTick(jf,t)}function Uf(t,e){return function(r,n){t.then(function(){if(e[St]){r(re(void 0,!0));return}e[Dr](r,n)},n)}}var Qf=Object.getPrototypeOf(function(){}),Gf=Object.setPrototypeOf((wt={get stream(){return this[pe]},next:function(){var e=this,r=this[ze];if(r!==null)return Promise.reject(r);if(this[St])return Promise.resolve(re(void 0,!0));if(this[pe].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[ze]?a(e[ze]):o(re(void 0,!0))})});var n=this[de],i;if(n)i=new Promise(Uf(n,this));else{var s=this[pe].read();if(s!==null)return Promise.resolve(re(s,!1));i=new Promise(this[Dr])}return this[de]=i,i}},ee(wt,Symbol.asyncIterator,function(){return this}),ee(wt,"return",function(){var e=this;return new Promise(function(r,n){e[pe].destroy(null,function(i){if(i){n(i);return}r(re(void 0,!0))})})}),wt),Qf),Wf=function(e){var r,n=Object.create(Gf,(r={},ee(r,pe,{value:e,writable:!0}),ee(r,te,{value:null,writable:!0}),ee(r,he,{value:null,writable:!0}),ee(r,ze,{value:null,writable:!0}),ee(r,St,{value:e._readableState.endEmitted,writable:!0}),ee(r,Dr,{value:function(s,o){var a=n[pe].read();a?(n[de]=null,n[te]=null,n[he]=null,s(re(a,!1))):(n[te]=s,n[he]=o)},writable:!0}),r));return n[de]=null,Bf(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[he];s!==null&&(n[de]=null,n[te]=null,n[he]=null,s(i)),n[ze]=i;return}var o=n[te];o!==null&&(n[de]=null,n[te]=null,n[he]=null,o(re(void 0,!0))),n[St]=!0}),e.on("readable",Ff.bind(null,n)),n};fs.exports=Wf});var gs=d((Mp,ps)=>{"use strict";function hs(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(l){r(l);return}a.done?e(u):Promise.resolve(u).then(n,i)}function Hf(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(u){hs(s,n,i,o,a,"next",u)}function a(u){hs(s,n,i,o,a,"throw",u)}o(void 0)})}}function ds(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $f(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ds(Object(r),!0).forEach(function(n){Vf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vf(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var zf=X().codes.ERR_INVALID_ARG_TYPE;function Yf(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new zf("iterable",["Iterable"],e);var i=new t($f({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=Hf(function*(){try{var u=yield n.next(),l=u.value,f=u.done;f?i.push(null):i.push(yield l)?o():s=!1}catch(h){i.destroy(h)}}),a.apply(this,arguments)}return i}ps.exports=Yf});var Ir=d((Ap,Rs)=>{"use strict";Rs.exports=_;var Me;_.ReadableState=ms;var Tp=require("events").EventEmitter,vs=function(e,r){return e.listeners(r).length},Ye=wr(),Et=require("buffer").Buffer,Kf=global.Uint8Array||function(){};function Jf(t){return Et.from(t)}function Xf(t){return Et.isBuffer(t)||t instanceof Kf}var Nr=require("util"),y;Nr&&Nr.debuglog?y=Nr.debuglog("stream"):y=function(){};var Zf=Gi(),kr=Cr(),ec=Rr(),tc=ec.getHighWaterMark,Ct=X().codes,rc=Ct.ERR_INVALID_ARG_TYPE,nc=Ct.ERR_STREAM_PUSH_AFTER_EOF,ic=Ct.ERR_METHOD_NOT_IMPLEMENTED,sc=Ct.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Te,Br,jr;fe()(_,Ye);var Ke=kr.errorOrDestroy,Fr=["error","close","destroy","pause","resume"];function oc(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function ms(t,e,r){Me=Me||ce(),t=t||{},typeof r!="boolean"&&(r=e instanceof Me),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=tc(this,t,"readableHighWaterMark",r),this.buffer=new Zf,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Te||(Te=require("string_decoder/").StringDecoder),this.decoder=new Te(t.encoding),this.encoding=t.encoding)}function _(t){if(Me=Me||ce(),!(this instanceof _))return new _(t);var e=this instanceof Me;this._readableState=new ms(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Ye.call(this)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});_.prototype.destroy=kr.destroy;_.prototype._undestroy=kr.undestroy;_.prototype._destroy=function(t,e){e(t)};_.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Et.from(t,e),e=""),n=!0),ys(this,t,e,!1,n)};_.prototype.unshift=function(t){return ys(this,t,null,!0,!1)};function ys(t,e,r,n,i){y("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,lc(t,s);else{var o;if(i||(o=ac(s,e)),o)Ke(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Et.prototype&&(e=Jf(e)),n)s.endEmitted?Ke(t,new sc):Ur(t,s,e,!0);else if(s.ended)Ke(t,new nc);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?Ur(t,s,e,!1):Qr(t,s)):Ur(t,s,e,!1)}else n||(s.reading=!1,Qr(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Ur(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Rt(t)),Qr(t,e)}function ac(t,e){var r;return!Xf(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new rc("chunk",["string","Buffer","Uint8Array"],e)),r}_.prototype.isPaused=function(){return this._readableState.flowing===!1};_.prototype.setEncoding=function(t){Te||(Te=require("string_decoder/").StringDecoder);var e=new Te(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var _s=1073741824;function uc(t){return t>=_s?t=_s:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function bs(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=uc(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}_.prototype.read=function(t){y("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return y("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Wr(this):Rt(this),null;if(t=bs(t,e),t===0&&e.ended)return e.length===0&&Wr(this),null;var n=e.needReadable;y("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,y("length less than watermark",n)),e.ended||e.reading?(n=!1,y("reading or ended",n)):n&&(y("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=bs(r,e)));var i;return t>0?i=Es(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Wr(this)),i!==null&&this.emit("data",i),i};function lc(t,e){if(y("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Rt(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,ws(t)))}}function Rt(t){var e=t._readableState;y("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(y("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(ws,t))}function ws(t){var e=t._readableState;y("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Gr(t)}function Qr(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(fc,t,e))}function fc(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(y("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}_.prototype._read=function(t){Ke(this,new ic("_read()"))};_.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,y("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:b;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(O,w){y("onunpipe"),O===r&&w&&w.hasUnpiped===!1&&(w.hasUnpiped=!0,f())}function a(){y("onend"),t.end()}var u=cc(r);t.on("drain",u);var l=!1;function f(){y("cleanup"),t.removeListener("close",g),t.removeListener("finish",m),t.removeListener("drain",u),t.removeListener("error",c),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",h),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",h);function h(O){y("ondata");var w=t.write(O);y("dest.write",w),w===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Cs(n.pipes,t)!==-1)&&!l&&(y("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function c(O){y("onerror",O),b(),t.removeListener("error",c),vs(t,"error")===0&&Ke(t,O)}oc(t,"error",c);function g(){t.removeListener("finish",m),b()}t.once("close",g);function m(){y("onfinish"),t.removeListener("close",g),b()}t.once("finish",m);function b(){y("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(y("pipe resume"),r.resume()),t};function cc(t){return function(){var r=t._readableState;y("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&vs(t,"data")&&(r.flowing=!0,Gr(t))}}_.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Cs(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};_.prototype.on=function(t,e){var r=Ye.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,y("on readable",n.length,n.reading),n.length?Rt(this):n.reading||process.nextTick(hc,this)),r};_.prototype.addListener=_.prototype.on;_.prototype.removeListener=function(t,e){var r=Ye.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(Ss,this),r};_.prototype.removeAllListeners=function(t){var e=Ye.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(Ss,this),e};function Ss(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function hc(t){y("readable nexttick read 0"),t.read(0)}_.prototype.resume=function(){var t=this._readableState;return t.flowing||(y("resume"),t.flowing=!t.readableListening,dc(this,t)),t.paused=!1,this};function dc(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(pc,t,e))}function pc(t,e){y("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Gr(t),e.flowing&&!e.reading&&t.read(0)}_.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Gr(t){var e=t._readableState;for(y("flow",e.flowing);e.flowing&&t.read()!==null;);}_.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(y("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(y("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<Fr.length;s++)t.on(Fr[s],this.emit.bind(this,Fr[s]));return this._read=function(o){y("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return Br===void 0&&(Br=cs()),Br(this)});Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});_._fromList=Es;Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Es(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Wr(t){var e=t._readableState;y("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(gc,e,t))}function gc(t,e){if(y("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(_.from=function(t,e){return jr===void 0&&(jr=gs()),jr(_,t,e)});function Cs(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Hr=d((Pp,Ts)=>{"use strict";Ts.exports=z;var Mt=X().codes,vc=Mt.ERR_METHOD_NOT_IMPLEMENTED,mc=Mt.ERR_MULTIPLE_CALLBACK,yc=Mt.ERR_TRANSFORM_ALREADY_TRANSFORMING,_c=Mt.ERR_TRANSFORM_WITH_LENGTH_0,Tt=ce();fe()(z,Tt);function bc(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new mc);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function z(t){if(!(this instanceof z))return new z(t);Tt.call(this,t),this._transformState={afterTransform:bc.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",wc)}function wc(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Ms(t,e,r)}):Ms(this,null,null)}z.prototype.push=function(t,e){return this._transformState.needTransform=!1,Tt.prototype.push.call(this,t,e)};z.prototype._transform=function(t,e,r){r(new vc("_transform()"))};z.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};z.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};z.prototype._destroy=function(t,e){Tt.prototype._destroy.call(this,t,function(r){e(r)})};function Ms(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new _c;if(t._transformState.transforming)throw new yc;return t.push(null)}});var Os=d((Op,Ps)=>{"use strict";Ps.exports=Je;var As=Hr();fe()(Je,As);function Je(t){if(!(this instanceof Je))return new Je(t);As.call(this,t)}Je.prototype._transform=function(t,e,r){r(null,t)}});var Ds=d((Lp,Is)=>{"use strict";var $r;function Sc(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Ls=X().codes,Ec=Ls.ERR_MISSING_ARGS,Cc=Ls.ERR_STREAM_DESTROYED;function xs(t){if(t)throw t}function Rc(t){return t.setHeader&&typeof t.abort=="function"}function Mc(t,e,r,n){n=Sc(n);var i=!1;t.on("close",function(){i=!0}),$r===void 0&&($r=bt()),$r(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,Rc(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Cc("pipe"))}}}function qs(t){t()}function Tc(t,e){return t.pipe(e)}function Ac(t){return!t.length||typeof t[t.length-1]!="function"?xs:t.pop()}function Pc(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Ac(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Ec("streams");var i,s=e.map(function(o,a){var u=a<e.length-1,l=a>0;return Mc(o,u,l,function(f){i||(i=f),f&&s.forEach(qs),!u&&(s.forEach(qs),n(i))})});return e.reduce(Tc)}Is.exports=Pc});var Ns=d((F,Ze)=>{var Xe=require("stream");process.env.READABLE_STREAM==="disable"&&Xe?(Ze.exports=Xe.Readable,Object.assign(Ze.exports,Xe),Ze.exports.Stream=Xe):(F=Ze.exports=Ir(),F.Stream=Xe||F,F.Readable=F,F.Writable=Lr(),F.Duplex=ce(),F.Transform=Hr(),F.PassThrough=Os(),F.finished=bt(),F.pipeline=Ds())});var Fs=d((xp,js)=>{"use strict";var{Transform:Oc}=Ns(),{StringDecoder:Lc}=require("string_decoder"),ne=Symbol("last"),At=Symbol("decoder");function xc(t,e,r){var n;if(this.overflow){var i=this[At].write(t);if(n=i.split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[ne]+=this[At].write(t),n=this[ne].split(this.matcher);this[ne]=n.pop();for(var s=0;s<n.length;s++)try{ks(this,this.mapper(n[s]))}catch(o){return r(o)}if(this.overflow=this[ne].length>this.maxLength,this.overflow&&!this.skipOverflow)return r(new Error("maximum buffer reached"));r()}function qc(t){if(this[ne]+=this[At].end(),this[ne])try{ks(this,this.mapper(this[ne]))}catch(e){return t(e)}t()}function ks(t,e){e!==void 0&&t.push(e)}function Bs(t){return t}function Ic(t,e,r){switch(t=t||/\r?\n/,e=e||Bs,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=Bs)}r=Object.assign({},r),r.transform=xc,r.flush=qc,r.readableObjectMode=!0;let n=new Oc(r);return n[ne]="",n[At]=new Lc("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow,n.overflow=!1,n}js.exports=Ic});var Gs=d((qp,Y)=>{"use strict";var Us=require("path"),Dc=require("stream").Stream,Nc=Fs(),Qs=require("util"),kc=5432,Pt=process.platform==="win32",et=process.stderr,Bc=56,jc=7,Fc=61440,Uc=32768;function Qc(t){return(t&Fc)==Uc}var Ae=["host","port","database","user","password"],Vr=Ae.length,Gc=Ae[Vr-1];function zr(){var t=et instanceof Dc&&et.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
`);et.write(Qs.format.apply(Qs,e))}}Object.defineProperty(Y.exports,"isWin",{get:function(){return Pt},set:function(t){Pt=t}});Y.exports.warnTo=function(t){var e=et;return et=t,e};Y.exports.getFileName=function(t){var e=t||process.env,r=e.PGPASSFILE||(Pt?Us.join(e.APPDATA||"./","postgresql","pgpass.conf"):Us.join(e.HOME||"./",".pgpass"));return r};Y.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Pt?!0:(e=e||"<unkn>",Qc(t.mode)?t.mode&(Bc|jc)?(zr('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(zr('WARNING: password file "%s" is not a plain file',e),!1))};var Wc=Y.exports.match=function(t,e){return Ae.slice(0,-1).reduce(function(r,n,i){return i==1&&Number(t[n]||kc)===Number(e[n])?r&&!0:r&&(e[n]==="*"||e[n]===t[n])},!0)};Y.exports.getPassword=function(t,e,r){var n,i=e.pipe(Nc());function s(u){var l=Hc(u);l&&$c(l)&&Wc(t,l)&&(n=l[Gc],i.end())}var o=function(){e.destroy(),r(n)},a=function(u){e.destroy(),zr("WARNING: error on reading file: %s",u),r(void 0)};e.on("error",a),i.on("data",s).on("end",o).on("error",a)};var Hc=Y.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",n=0,i=0,s=0,o={},a=!1,u=function(f,h,c){var g=t.substring(h,c);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(g=g.replace(/\\([:\\])/g,"$1")),o[Ae[f]]=g},l=0;l<t.length-1;l+=1){if(e=t.charAt(l+1),r=t.charAt(l),a=n==Vr-1,a){u(n,i);break}l>=0&&e==":"&&r!=="\\"&&(u(n,i,l+1),i=l+2,n+=1)}return o=Object.keys(o).length===Vr?o:null,o},$c=Y.exports.isValidEntry=function(t){for(var e={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},r=0;r<Ae.length;r+=1){var n=e[r],i=t[Ae[r]]||"",s=n(i);if(!s)return!1}return!0}});var Hs=d((Dp,Yr)=>{"use strict";var Ip=require("path"),Ws=require("fs"),Ot=Gs();Yr.exports=function(t,e){var r=Ot.getFileName();Ws.stat(r,function(n,i){if(n||!Ot.usePgPass(i,r))return e(void 0);var s=Ws.createReadStream(r);Ot.getPassword(t,s,e)})};Yr.exports.warnTo=Ot.warnTo});var Kr=d((Np,$s)=>{"use strict";var Vc=We();function Lt(t){this._types=t||Vc,this.text={},this.binary={}}Lt.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};Lt.prototype.setTypeParser=function(t,e,r){typeof e=="function"&&(r=e,e="text"),this.getOverrides(e)[t]=r};Lt.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};$s.exports=Lt});var zs=d((kp,Vs)=>{"use strict";var zc=require("url"),Jr=require("fs");function Xr(t){if(t.charAt(0)==="/"){var r=t.split(" ");return{host:r[0],database:r[1]}}var e=zc.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)?encodeURI(t).replace(/\%25(\d\d)/g,"%$1"):t,!0),r=e.query;for(var n in r)Array.isArray(r[n])&&(r[n]=r[n][r[n].length-1]);var i=(e.auth||":").split(":");if(r.user=i[0],r.password=i.splice(1).join(":"),r.port=e.port,e.protocol=="socket:")return r.host=decodeURI(e.pathname),r.database=e.query.db,r.client_encoding=e.query.encoding,r;r.host||(r.host=e.hostname);var s=e.pathname;if(!r.host&&s&&/^%2f/i.test(s)){var o=s.split("/");r.host=decodeURIComponent(o[0]),s=o.splice(1).join("/")}switch(s&&s.charAt(0)==="/"&&(s=s.slice(1)||null),r.database=s&&decodeURI(s),(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={}),r.sslcert&&(r.ssl.cert=Jr.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=Jr.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=Jr.readFileSync(r.sslrootcert).toString()),r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}Vs.exports=Xr;Xr.parse=Xr});var Zr=d((Bp,Xs)=>{"use strict";var Yc=require("dns"),Ys=He(),Ks=zs().parse,I=function(t,e,r){return r===void 0?r=process.env["PG"+t.toUpperCase()]:r===!1||(r=process.env[r]),e[t]||r||Ys[t]},Kc=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Ys.ssl},Pe=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},U=function(t,e,r){var n=e[r];n!=null&&t.push(r+"="+Pe(n))},Js=class{constructor(e){e=typeof e=="string"?Ks(e):e||{},e.connectionString&&(e=Object.assign({},e,Ks(e.connectionString))),this.user=I("user",e),this.database=I("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(I("port",e),10),this.host=I("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:I("password",e)}),this.binary=I("binary",e),this.options=I("options",e),this.ssl=typeof e.ssl=="undefined"?Kc():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=I("client_encoding",e),this.replication=I("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=I("application_name",e,"PGAPPNAME"),this.fallback_application_name=I("fallback_application_name",e,!1),this.statement_timeout=I("statement_timeout",e,!1),this.idle_in_transaction_session_timeout=I("idle_in_transaction_session_timeout",e,!1),this.query_timeout=I("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var r=[];U(r,this,"user"),U(r,this,"password"),U(r,this,"port"),U(r,this,"application_name"),U(r,this,"fallback_application_name"),U(r,this,"connect_timeout"),U(r,this,"options");var n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(U(r,n,"sslmode"),U(r,n,"sslca"),U(r,n,"sslkey"),U(r,n,"sslcert"),U(r,n,"sslrootcert"),this.database&&r.push("dbname="+Pe(this.database)),this.replication&&r.push("replication="+Pe(this.replication)),this.host&&r.push("host="+Pe(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+Pe(this.client_encoding)),Yc.lookup(this.host,function(i,s){return i?e(i,null):(r.push("hostaddr="+Pe(s)),e(null,r.join(" ")))})}};Xs.exports=Js});var ro=d((jp,to)=>{"use strict";var Jc=We(),Zs=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,eo=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(e){var r;e.text?r=Zs.exec(e.text):r=Zs.exec(e.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++){var s=e[n];s!==null?r[n]=this._parsers[n](s):r[n]=null}return r}parseRow(e){for(var r={},n=0,i=e.length;n<i;n++){var s=e[n],o=this.fields[n].name;s!==null?r[o]=this._parsers[n](s):r[o]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var r=0;r<e.length;r++){var n=e[r];this._types?this._parsers[r]=this._types.getTypeParser(n.dataTypeID,n.format||"text"):this._parsers[r]=Jc.getTypeParser(n.dataTypeID,n.format||"text")}}};to.exports=eo});var ao=d((Fp,oo)=>{"use strict";var{EventEmitter:Xc}=require("events"),no=ro(),io=dt(),so=class extends Xc{constructor(e,r,n){super();e=io.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new no(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new no(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);this.callback&&this.callback(null,this._results),this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];return this.text&&r&&this.text!==r?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:io.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};oo.exports=so});var en=d(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.NoticeMessage=v.DataRowMessage=v.CommandCompleteMessage=v.ReadyForQueryMessage=v.NotificationResponseMessage=v.BackendKeyDataMessage=v.AuthenticationMD5Password=v.ParameterStatusMessage=v.ParameterDescriptionMessage=v.RowDescriptionMessage=v.Field=v.CopyResponse=v.CopyDataMessage=v.DatabaseError=v.copyDone=v.emptyQuery=v.replicationStart=v.portalSuspended=v.noData=v.closeComplete=v.bindComplete=v.parseComplete=void 0;v.parseComplete={name:"parseComplete",length:5};v.bindComplete={name:"bindComplete",length:5};v.closeComplete={name:"closeComplete",length:5};v.noData={name:"noData",length:5};v.portalSuspended={name:"portalSuspended",length:5};v.replicationStart={name:"replicationStart",length:4};v.emptyQuery={name:"emptyQuery",length:4};v.copyDone={name:"copyDone",length:4};var uo=class extends Error{constructor(e,r,n){super(e);this.length=r,this.name=n}};v.DatabaseError=uo;var lo=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};v.CopyDataMessage=lo;var fo=class{constructor(e,r,n,i){this.length=e,this.name=r,this.binary=n,this.columnTypes=new Array(i)}};v.CopyResponse=fo;var co=class{constructor(e,r,n,i,s,o,a){this.name=e,this.tableID=r,this.columnID=n,this.dataTypeID=i,this.dataTypeSize=s,this.dataTypeModifier=o,this.format=a}};v.Field=co;var ho=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};v.RowDescriptionMessage=ho;var po=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};v.ParameterDescriptionMessage=po;var go=class{constructor(e,r,n){this.length=e,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};v.ParameterStatusMessage=go;var vo=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};v.AuthenticationMD5Password=vo;var mo=class{constructor(e,r,n){this.length=e,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};v.BackendKeyDataMessage=mo;var yo=class{constructor(e,r,n,i){this.length=e,this.processId=r,this.channel=n,this.payload=i,this.name="notification"}};v.NotificationResponseMessage=yo;var _o=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};v.ReadyForQueryMessage=_o;var bo=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};v.CommandCompleteMessage=bo;var wo=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};v.DataRowMessage=wo;var So=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};v.NoticeMessage=So});var Co=d(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.Writer=void 0;var Eo=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){var r=this.buffer.length-this.offset;if(r<e){var n=this.buffer,i=n.length+(n.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),n.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{var r=Buffer.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(e=""){var r=Buffer.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};xt.Writer=Eo});var Mo=d(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.serialize=void 0;var tn=Co(),C=new tn.Writer,Zc=t=>{C.addInt16(3).addInt16(0);for(let n of Object.keys(t))C.addCString(n).addCString(t[n]);C.addCString("client_encoding").addCString("UTF8");var e=C.addCString("").flush(),r=e.length+4;return new tn.Writer().addInt32(r).add(e).flush()},eh=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},th=t=>C.addCString(t).flush(112),rh=function(t,e){return C.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),C.flush(112)},nh=function(t){return C.addString(t).flush(112)},ih=t=>C.addCString(t).flush(81),Ro=[],sh=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let r=t.types||Ro;for(var n=r.length,i=C.addCString(e).addCString(t.text).addInt16(n),s=0;s<n;s++)i.addInt32(r[s]);return C.flush(80)},Oe=new tn.Writer,oh=function(t,e){for(let r=0;r<t.length;r++){let n=e?e(t[r],r):t[r];n==null?(C.addInt16(0),Oe.addInt32(-1)):n instanceof Buffer?(C.addInt16(1),Oe.addInt32(n.length),Oe.add(n)):(C.addInt16(0),Oe.addInt32(Buffer.byteLength(n)),Oe.addString(n))}},ah=(t={})=>{let e=t.portal||"",r=t.statement||"",n=t.binary||!1,i=t.values||Ro,s=i.length;return C.addCString(e).addCString(r),C.addInt16(s),oh(i,t.valueMapper),C.addInt16(s),C.add(Oe.flush()),C.addInt16(n?1:0),C.flush(66)},uh=Buffer.from([69,0,0,0,9,0,0,0,0,0]),lh=t=>{if(!t||!t.portal&&!t.rows)return uh;let e=t.portal||"",r=t.rows||0,n=Buffer.byteLength(e),i=4+n+1+4,s=Buffer.allocUnsafe(1+i);return s[0]=69,s.writeInt32BE(i,1),s.write(e,5,"utf-8"),s[n+5]=0,s.writeUInt32BE(r,s.length-4),s},fh=(t,e)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(t,8),r.writeInt32BE(e,12),r},rn=(t,e)=>{let r=Buffer.byteLength(e),n=4+r+1,i=Buffer.allocUnsafe(1+n);return i[0]=t,i.writeInt32BE(n,1),i.write(e,5,"utf-8"),i[n]=0,i},ch=C.addCString("P").flush(68),hh=C.addCString("S").flush(68),dh=t=>t.name?rn(68,`${t.type}${t.name||""}`):t.type==="P"?ch:hh,ph=t=>{let e=`${t.type}${t.name||""}`;return rn(67,e)},gh=t=>C.add(t).flush(100),vh=t=>rn(102,t),qt=t=>Buffer.from([t,0,0,0,4]),mh=qt(72),yh=qt(83),_h=qt(88),bh=qt(99),wh={startup:Zc,password:th,requestSsl:eh,sendSASLInitialResponseMessage:rh,sendSCRAMClientFinalMessage:nh,query:ih,parse:sh,bind:ah,execute:lh,describe:dh,close:ph,flush:()=>mh,sync:()=>yh,end:()=>_h,copyData:gh,copyDone:()=>bh,copyFail:vh,cancel:fh};It.serialize=wh});var Ao=d(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.BufferReader=void 0;var Sh=Buffer.allocUnsafe(0),To=class{constructor(e=0){this.offset=e,this.buffer=Sh,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};Dt.BufferReader=To});var xo=d(Le=>{"use strict";var Eh=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Le,"__esModule",{value:!0});Le.Parser=void 0;var M=en(),Ch=Ao(),Rh=Eh(require("assert")),nn=1,Mh=4,Po=nn+Mh,Oo=Buffer.allocUnsafe(0),Lo=class{constructor(e){if(this.buffer=Oo,this.bufferLength=0,this.bufferOffset=0,this.reader=new Ch.BufferReader,(e==null?void 0:e.mode)==="binary")throw new Error("Binary mode not supported yet");this.mode=(e==null?void 0:e.mode)||"text"}parse(e,r){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+Po<=n;){let s=this.buffer[i],o=this.buffer.readUInt32BE(i+nn),a=nn+o;if(a+i<=n){let u=this.handlePacket(i+Po,s,o,this.buffer);r(u),i+=a}else break}i===n?(this.buffer=Oo,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let i;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let s=this.buffer.byteLength*2;for(;r>=s;)s*=2;i=Buffer.allocUnsafe(s)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,n,i){switch(r){case 50:return M.bindComplete;case 49:return M.parseComplete;case 51:return M.closeComplete;case 110:return M.noData;case 115:return M.portalSuspended;case 99:return M.copyDone;case 87:return M.replicationStart;case 73:return M.emptyQuery;case 68:return this.parseDataRowMessage(e,n,i);case 67:return this.parseCommandCompleteMessage(e,n,i);case 90:return this.parseReadyForQueryMessage(e,n,i);case 65:return this.parseNotificationMessage(e,n,i);case 82:return this.parseAuthenticationResponse(e,n,i);case 83:return this.parseParameterStatusMessage(e,n,i);case 75:return this.parseBackendKeyData(e,n,i);case 69:return this.parseErrorMessage(e,n,i,"error");case 78:return this.parseErrorMessage(e,n,i,"notice");case 84:return this.parseRowDescriptionMessage(e,n,i);case 116:return this.parseParameterDescriptionMessage(e,n,i);case 71:return this.parseCopyInMessage(e,n,i);case 72:return this.parseCopyOutMessage(e,n,i);case 100:return this.parseCopyData(e,n,i);default:Rh.default.fail(`unknown message code: ${r.toString(16)}`)}}parseReadyForQueryMessage(e,r,n){this.reader.setBuffer(e,n);let i=this.reader.string(1);return new M.ReadyForQueryMessage(r,i)}parseCommandCompleteMessage(e,r,n){this.reader.setBuffer(e,n);let i=this.reader.cstring();return new M.CommandCompleteMessage(r,i)}parseCopyData(e,r,n){let i=n.slice(e,e+(r-4));return new M.CopyDataMessage(r,i)}parseCopyInMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyInResponse")}parseCopyOutMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyOutResponse")}parseCopyMessage(e,r,n,i){this.reader.setBuffer(e,n);let s=this.reader.byte()!==0,o=this.reader.int16(),a=new M.CopyResponse(r,i,s,o);for(let u=0;u<o;u++)a.columnTypes[u]=this.reader.int16();return a}parseNotificationMessage(e,r,n){this.reader.setBuffer(e,n);let i=this.reader.int32(),s=this.reader.cstring(),o=this.reader.cstring();return new M.NotificationResponseMessage(r,i,s,o)}parseRowDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let i=this.reader.int16(),s=new M.RowDescriptionMessage(r,i);for(let o=0;o<i;o++)s.fields[o]=this.parseField();return s}parseField(){let e=this.reader.cstring(),r=this.reader.int32(),n=this.reader.int16(),i=this.reader.int32(),s=this.reader.int16(),o=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new M.Field(e,r,n,i,s,o,a)}parseParameterDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let i=this.reader.int16(),s=new M.ParameterDescriptionMessage(r,i);for(let o=0;o<i;o++)s.dataTypeIDs[o]=this.reader.int32();return s}parseDataRowMessage(e,r,n){this.reader.setBuffer(e,n);let i=this.reader.int16(),s=new Array(i);for(let o=0;o<i;o++){let a=this.reader.int32();s[o]=a===-1?null:this.reader.string(a)}return new M.DataRowMessage(r,s)}parseParameterStatusMessage(e,r,n){this.reader.setBuffer(e,n);let i=this.reader.cstring(),s=this.reader.cstring();return new M.ParameterStatusMessage(r,i,s)}parseBackendKeyData(e,r,n){this.reader.setBuffer(e,n);let i=this.reader.int32(),s=this.reader.int32();return new M.BackendKeyDataMessage(r,i,s)}parseAuthenticationResponse(e,r,n){this.reader.setBuffer(e,n);let i=this.reader.int32(),s={name:"authenticationOk",length:r};switch(i){case 0:break;case 3:s.length===8&&(s.name="authenticationCleartextPassword");break;case 5:if(s.length===12){s.name="authenticationMD5Password";let a=this.reader.bytes(4);return new M.AuthenticationMD5Password(r,a)}break;case 10:s.name="authenticationSASL",s.mechanisms=[];let o;do o=this.reader.cstring(),o&&s.mechanisms.push(o);while(o);break;case 11:s.name="authenticationSASLContinue",s.data=this.reader.string(r-8);break;case 12:s.name="authenticationSASLFinal",s.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return s}parseErrorMessage(e,r,n,i){this.reader.setBuffer(e,n);let s={},o=this.reader.string(1);for(;o!=="\0";)s[o]=this.reader.cstring(),o=this.reader.string(1);let a=s.M,u=i==="notice"?new M.NoticeMessage(r,a):new M.DatabaseError(a,r,i);return u.severity=s.S,u.code=s.C,u.detail=s.D,u.hint=s.H,u.position=s.P,u.internalPosition=s.p,u.internalQuery=s.q,u.where=s.W,u.schema=s.s,u.table=s.t,u.column=s.c,u.dataType=s.d,u.constraint=s.n,u.file=s.F,u.line=s.L,u.routine=s.R,u}};Le.Parser=Lo});var sn=d(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.DatabaseError=ie.serialize=ie.parse=void 0;var Th=en();Object.defineProperty(ie,"DatabaseError",{enumerable:!0,get:function(){return Th.DatabaseError}});var Ah=Mo();Object.defineProperty(ie,"serialize",{enumerable:!0,get:function(){return Ah.serialize}});var Ph=xo();function Oh(t,e){let r=new Ph.Parser;return t.on("data",n=>r.parse(n,e)),new Promise(n=>t.on("end",()=>n()))}ie.parse=Oh});var on=d((Vp,No)=>{"use strict";var qo=require("net"),Lh=require("events").EventEmitter,{parse:xh,serialize:A}=sn(),Io=A.flush(),qh=A.sync(),Ih=A.end(),Do=class extends Lh{constructor(e){super();e=e||{},this.stream=e.stream||new qo.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(e,r){var n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let i=function(s){n._ending&&(s.code==="ECONNRESET"||s.code==="EPIPE")||n.emit("error",s)};if(this.stream.on("error",i),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(s){var o=s.toString("utf8");switch(o){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}var a=require("tls");let u={socket:n.stream};n.ssl!==!0&&(Object.assign(u,n.ssl),"key"in n.ssl&&(u.key=n.ssl.key)),qo.isIP(r)===0&&(u.servername=r);try{n.stream=a.connect(u)}catch(l){return n.emit("error",l)}n.attachListeners(n.stream),n.stream.on("error",i),n.emit("sslconnect")})}attachListeners(e){e.on("end",()=>{this.emit("end")}),xh(e,r=>{var n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(A.requestSsl())}startup(e){this.stream.write(A.startup(e))}cancel(e,r){this._send(A.cancel(e,r))}password(e){this._send(A.password(e))}sendSASLInitialResponseMessage(e,r){this._send(A.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(A.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(A.query(e))}parse(e){this._send(A.parse(e))}bind(e){this._send(A.bind(e))}execute(e){this._send(A.execute(e))}flush(){this.stream.writable&&this.stream.write(Io)}sync(){this._ending=!0,this._send(Io),this._send(qh)}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Ih,()=>{this.stream.end()})}close(e){this._send(A.close(e))}describe(e){this._send(A.describe(e))}sendCopyFromChunk(e){this._send(A.copyData(e))}endCopyFrom(){this._send(A.copyDone())}sendCopyFail(e){this._send(A.copyFail(e))}};No.exports=Do});var jo=d((Yp,Bo)=>{"use strict";var Dh=require("events").EventEmitter,zp=require("util"),Nh=dt(),an=Bi(),kh=Hs(),Bh=Kr(),jh=Zr(),ko=ao(),Fh=He(),Uh=on(),un=class extends Dh{constructor(e){super();this.connectionParameters=new jh(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var r=e||{};this._Promise=r.Promise||global.Promise,this._types=new Bh(r.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=r.connection||new Uh({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||Fh.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let r=n=>{process.nextTick(()=>{n.handleError(e,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(e){var r=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let i=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(i)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let i=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(i),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(i):this._handleErrorEvent(i):this._connectionError||this._handleErrorEvent(i)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((r,n)=>{this._connect(i=>{i?n(i):r()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let r=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(n=>{r.emit("error",n)}):this.password!==null?e():kh(this.connectionParameters,n=>{n!==void 0&&(this.connectionParameters.password=this.password=n),e()})}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(()=>{let r=Nh.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)})}_handleAuthSASL(e){this._checkPgPass(()=>{this.saslSession=an.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(e){an.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(e){an.finalizeSession(this.saslSession,e.data),this.saslSession=null}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this.activeQuery;if(!r){this._handleErrorEvent(e);return}this.activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,r={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(r.application_name=n),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){var n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(r)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return this._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return'"'+e.replace(/"/g,'""')+'"'}escapeLiteral(e){for(var r=!1,n="'",i=0;i<e.length;i++){var s=e[i];s==="'"?n+=s+s:s==="\\"?(n+=s+s,r=!0):n+=s}return n+="'",r===!0&&(n=" E"+n),n}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,r,n){var i,s,o,a,u;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(o=e.query_timeout||this.connectionParameters.query_timeout,s=i=e,typeof r=="function"&&(i.callback=i.callback||r)):(o=this.connectionParameters.query_timeout,i=new ko(e,r,n),i.callback||(s=new this._Promise((l,f)=>{i.callback=(h,c)=>h?f(h):l(c)}))),o&&(u=i.callback,a=setTimeout(()=>{var l=new Error("Query read timeout");process.nextTick(()=>{i.handleError(l,this.connection)}),u(l),i.callback=()=>{};var f=this.queryQueue.indexOf(i);f>-1&&this.queryQueue.splice(f,1),this._pulseQueryQueue()},o),i.callback=(l,f)=>{clearTimeout(a),u(l,f)}),this.binary&&!i.binary&&(i.binary=!0),i._result&&!i._result._types&&(i._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable"),this.connection)}),s):(this.queryQueue.push(i),this._pulseQueryQueue(),s):(process.nextTick(()=>{i.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),s)}end(e){if(this._ending=!0,!this.connection._connecting)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connection.once("end",r)})}};un.Query=ko;Bo.exports=un});var Ho=d((Kp,Wo)=>{"use strict";var Qh=require("events").EventEmitter,Fo=function(){},Uo=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.splice(r,1)[0]},Qo=class{constructor(e,r,n){this.client=e,this.idleListener=r,this.timeoutId=n}},Nt=class{constructor(e){this.callback=e}};function Gh(){throw new Error("Release called on client which has already been released to the pool.")}function kt(t,e){if(e)return{callback:e,result:void 0};let r,n,i=function(o,a){o?r(o):n(a)},s=new t(function(o,a){n=o,r=a});return{callback:i,result:s}}function Wh(t,e){return function r(n){n.client=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client error after disconnection due to error",n)}),t._remove(e),t.emit("error",n,e)}}var Go=class extends Qh{constructor(e,r){super();this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||ln().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis=="undefined"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client,i=r.idleListener;return this._acquireClient(n,e,i,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e){let r=Uo(this._idle,n=>n.client===e);r!==void 0&&clearTimeout(r.timeoutId),this._clients=this._clients.filter(n=>n!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){let i=new Error("Cannot use a pool after calling end on the pool");return e?e(i):this.Promise.reject(i)}let r=kt(this.Promise,e),n=r.result;if(this._clients.length>=this.options.max||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Nt(r.callback)),n;let i=(a,u,l)=>{clearTimeout(o),r.callback(a,u,l)},s=new Nt(i),o=setTimeout(()=>{Uo(this._pendingQueue,a=>a.callback===i),s.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(s),n}return this.newClient(new Nt(r.callback)),n}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let n=Wh(this,r);this.log("checking client timeout");let i,s=!1;this.options.connectionTimeoutMillis&&(i=setTimeout(()=>{this.log("ending client due to timeout"),s=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(o=>{if(i&&clearTimeout(i),r.on("error",n),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==r),s&&(o.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(o,void 0,Fo);else return this.log("new client connected"),this._acquireClient(r,e,n,!0)})}_acquireClient(e,r,n,i){i&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),r.timedOut?i&&this.options.verify?this.options.verify(e,e.release):e.release():i&&this.options.verify?this.options.verify(e,s=>{if(s)return e.release(s),r.callback(s,void 0,Fo);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let n=!1;return i=>{n&&Gh(),n=!0,this._release(e,r,i)}}_release(e,r,n){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses){e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),this._pulseQueue();return}let i;this.options.idleTimeoutMillis&&(i=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis)),this._idle.push(new Qo(e,r,i)),this._pulseQueue()}query(e,r,n){if(typeof e=="function"){let s=kt(this.Promise,e);return setImmediate(function(){return s.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),s.result}typeof r=="function"&&(n=r,r=void 0);let i=kt(this.Promise,n);return n=i.callback,this.connect((s,o)=>{if(s)return n(s);let a=!1,u=l=>{a||(a=!0,o.release(l),n(l))};o.once("error",u),this.log("dispatching query"),o.query(e,r,(l,f)=>{if(this.log("query dispatched"),o.removeListener("error",u),!a)return a=!0,o.release(l),l?n(l):n(void 0,f)})}),i.result}end(e){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return e?e(n):this.Promise.reject(n)}this.ending=!0;let r=kt(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get totalCount(){return this._clients.length}};Wo.exports=Go});var $o=d((Jp,Hh)=>{Hh.exports={_args:[["pg@8.6.0","C:\\Users\\barto\\OneDrive\\Desktop\\revature-20210524\\project2\\TeamCoolGuyBackend\\tcswap-backend"]],_from:"pg@8.6.0",_id:"pg@8.6.0",_inBundle:!1,_integrity:"sha512-qNS9u61lqljTDFvmk/N66EeGq3n6Ujzj0FFyNMGQr6XuEv4tgNTXvJQTfJdcvGit5p5/DWPu+wj920hAJFI+QQ==",_location:"/pg",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"pg@8.6.0",name:"pg",escapedName:"pg",rawSpec:"8.6.0",saveSpec:null,fetchSpec:"8.6.0"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/pg/-/pg-8.6.0.tgz",_spec:"8.6.0",_where:"C:\\Users\\barto\\OneDrive\\Desktop\\revature-20210524\\project2\\TeamCoolGuyBackend\\tcswap-backend",author:{name:"Brian Carlson",email:"brian.m.carlson@gmail.com"},bugs:{url:"https://github.com/brianc/node-postgres/issues"},dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.3.0","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},description:"PostgreSQL client - pure javascript & libpq with the same API",devDependencies:{async:"0.9.0",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},engines:{node:">= 8.0.0"},files:["lib","SPONSORS.md"],gitHead:"d45947938263bec30a1e3252452f04177b785f66",homepage:"https://github.com/brianc/node-postgres",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],license:"MIT",main:"./lib",name:"pg",peerDependencies:{"pg-native":">=2.0.0"},peerDependenciesMeta:{"pg-native":{optional:!0}},repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},scripts:{test:"make test-all"},version:"8.6.0"}});var Yo=d((Xp,zo)=>{"use strict";var Vo=require("events").EventEmitter,$h=require("util"),fn=dt(),xe=zo.exports=function(t,e,r){Vo.call(this),t=fn.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};$h.inherits(xe,Vo);var Vh={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};xe.prototype.handleError=function(t){var e=this.native.pq.resultErrorFields();if(e)for(var r in e){var n=Vh[r]||r;t[n]=e[r]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};xe.prototype.then=function(t,e){return this._getPromise().then(t,e)};xe.prototype.catch=function(t){return this._getPromise().catch(t)};xe.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};xe.prototype.submit=function(t){this.state="running";var e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;var r=function(s,o,a){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),s)return e.handleError(s);e._emitRowEvents&&(a.length>1?o.forEach((u,l)=>{u.forEach(f=>{e.emit("row",f,a[l])})}):o.forEach(function(u){e.emit("row",u,a)})),e.state="end",e.emit("end",a),e.callback&&e.callback(null,a)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var n=(this.values||[]).map(fn.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return t.native.execute(this.name,n,r)}return t.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}var i=this.values.map(fn.prepareValue);t.native.query(this.text,i,r)}else t.native.query(this.text,r)}});var Zo=d((eg,Xo)=>{"use strict";var zh=require("pg-native"),Yh=Kr(),Zp=$o(),Ko=require("events").EventEmitter,Kh=require("util"),Jh=Zr(),Jo=Yo(),Q=Xo.exports=function(t){Ko.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new Yh(t.types),this.native=new zh({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var e=this.connectionParameters=new Jh(t);this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};Q.Query=Jo;Kh.inherits(Q,Ko);Q.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};Q.prototype._connect=function(t){var e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(r)return t(r);e.native.connect(n,function(i){if(i)return e.native.end(),t(i);e._connected=!0,e.native.on("error",function(s){e._queryable=!1,e._errorAllQueries(s),e.emit("error",s)}),e.native.on("notification",function(s){e.emit("notification",{channel:s.relname,payload:s.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};Q.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})};Q.prototype.query=function(t,e,r){var n,i,s,o,a;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")s=t.query_timeout||this.connectionParameters.query_timeout,i=n=t,typeof e=="function"&&(t.callback=e);else if(s=this.connectionParameters.query_timeout,n=new Jo(t,e,r),!n.callback){let u,l;i=new this._Promise((f,h)=>{u=f,l=h}),n.callback=(f,h)=>f?l(f):u(h)}return s&&(a=n.callback,o=setTimeout(()=>{var u=new Error("Query read timeout");process.nextTick(()=>{n.handleError(u,this.connection)}),a(u),n.callback=()=>{};var l=this._queryQueue.indexOf(n);l>-1&&this._queryQueue.splice(l,1),this._pulseQueryQueue()},s),n.callback=(u,l)=>{clearTimeout(o),a(u,l)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(n),this._pulseQueryQueue(),i):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)};Q.prototype.end=function(t){var e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));var r;return t||(r=new this._Promise(function(n,i){t=s=>s?i(s):n()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),r};Q.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};Q.prototype._pulseQueryQueue=function(t){if(!!this._connected&&!this._hasActiveQuery()){var e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);var r=this;e.once("_done",function(){r._pulseQueryQueue()})}};Q.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};Q.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)};Q.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var cn=d((tg,ea)=>{"use strict";ea.exports=Zo()});var ln=d((ng,tt)=>{"use strict";var Xh=jo(),Zh=He(),ed=on(),td=Ho(),{DatabaseError:rd}=sn(),nd=t=>class extends td{constructor(r){super(r,t)}},hn=function(t){this.defaults=Zh,this.Client=t,this.Query=this.Client.Query,this.Pool=nd(this.Client),this._pools=[],this.Connection=ed,this.types=We(),this.DatabaseError=rd};typeof process.env.NODE_PG_FORCE_NATIVE!="undefined"?tt.exports=new hn(cn()):(tt.exports=new hn(Xh),Object.defineProperty(tt.exports,"native",{configurable:!0,enumerable:!1,get(){var t=null;try{t=new hn(cn())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(tt.exports,"native",{value:t}),t}}))});var ia=d((ug,na)=>{na.exports=t=>t&&typeof t.then=="function"&&typeof t.catch=="function"});var aa=d((lg,oa)=>{oa.exports=sa;function sa(t,e){if(t&&e)return sa(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(n){r[n]=t[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=t.apply(this,n),o=n[n.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(a){s[a]=o[a]}),s}}});var fa=d((fg,gn)=>{var ua=aa();gn.exports=ua(Bt);gn.exports.strict=ua(la);Bt.proto=Bt(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Bt(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return la(this)},configurable:!0})});function Bt(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function la(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var pa=d((cg,da)=>{var vn=ia(),ca=fa(),ha=(t,e,r)=>{let n=Array.from(t),i=s=>{try{if(s)return r(s);let o=n.shift();if(o){let a=o(e,i);if(a){if(!vn(a))throw new Error("Unexpected return value in middleware");a.then(i).catch(r)}return}return r()}catch(o){return r(o)}};i()},ud=(t,e,r)=>{let n=Array.from(t);e.__handledError=!1;let i=s=>{try{s||(e.__handledError=!0);let o=n.shift();if(o){let a=o(e,i);if(a){if(!vn(a)){let u=new Error("Unexpected return value in onError middleware");throw u.originalError=s,u}a.then(i).catch(r)}return}return r(e.__handledError?null:s)}catch(o){return r(o)}};i(e.error)},ld=t=>{let e=[],r=[],n=[],i=(s,o,a)=>{let u={};u.event=s,u.context=o,u.callback=a,u.response=null,u.error=null;let l=new Promise((f,h)=>{let c=m=>m?a?a(m):h(m):a?a(null,u.response):f(u.response),g=m=>(u.error=m,ud(n,u,c));ha(e,u,m=>{if(m)return g(m);let b=ca(D=>{u.response=null,g(D)}),O=ca(D=>{u.response=D,ha(r,u,se=>{if(se)return g(se);c()})}),w=t.call(u,u.event,u.context,(D,se)=>{if(D)return b(D);O(se)});if(w){if(!vn(w))throw new Error("Unexpected return value in handler");w.then(O).catch(b)}})});if(!u.callback)return l};return i.use=s=>{if(Array.isArray(s))return s.forEach(o=>i.applyMiddleware(o)),i;if(typeof s=="object")return i.applyMiddleware(s);throw new Error("Middy.use() accepts an object or an array of objects")},i.applyMiddleware=s=>{if(typeof s!="object")throw new Error("Middleware must be an object");let{before:o,after:a,onError:u}=s;if(!o&&!a&&!u)throw new Error('Middleware must contain at least one key among "before", "after", "onError"');return o&&i.before(o),a&&i.after(a),u&&i.onError(u),i},i.before=s=>(e.push(s),i),i.after=s=>(r.unshift(s),i),i.onError=s=>(n.push(s),i),i.__middlewares={before:e,after:r,onError:n},i};da.exports=ld});var va=d((hg,ga)=>{"use strict";ga.exports=cd;function fd(t){var e,r="";if(t.isNative()?r="native":t.isEval()?(e=t.getScriptNameOrSourceURL(),e||(r=t.getEvalOrigin())):e=t.getFileName(),e){r+=e;var n=t.getLineNumber();if(n!=null){r+=":"+n;var i=t.getColumnNumber();i&&(r+=":"+i)}}return r||"unknown source"}function cd(t){var e=!0,r=fd(t),n=t.getFunctionName(),i=t.isConstructor(),s=!(t.isToplevel()||i),o="";if(s){var a=t.getMethodName(),u=hd(t);n?(u&&n.indexOf(u)!==0&&(o+=u+"."),o+=n,a&&n.lastIndexOf("."+a)!==n.length-a.length-1&&(o+=" [as "+a+"]")):o+=u+"."+(a||"<anonymous>")}else i?o+="new "+(n||"<anonymous>"):n?o+=n:(e=!1,o+=r);return e&&(o+=" ("+r+")"),o}function hd(t){var e=t.receiver;return e.constructor&&e.constructor.name||null}});var ya=d((dg,ma)=>{"use strict";ma.exports=dd;function dd(t,e){return t.listeners(e).length}});var yn=d((pg,mn)=>{"use strict";var pd=require("events").EventEmitter;_a(mn.exports,"callSiteToString",function(){var e=Error.stackTraceLimit,r={},n=Error.prepareStackTrace;function i(o,a){return a}Error.prepareStackTrace=i,Error.stackTraceLimit=2,Error.captureStackTrace(r);var s=r.stack.slice();return Error.prepareStackTrace=n,Error.stackTraceLimit=e,s[0].toString?gd:va()});_a(mn.exports,"eventListenerCount",function(){return pd.listenerCount||ya()});function _a(t,e,r){function n(){var i=r();return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:i}),i}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:n})}function gd(t){return t.toString()}});var ba=d((exports,module)=>{var callSiteToString=yn().callSiteToString,eventListenerCount=yn().eventListenerCount,relative=require("path").relative;module.exports=depd;var basePath=process.cwd();function containsNamespace(t,e){for(var r=t.split(/[ ,]+/),n=String(e).toLowerCase(),i=0;i<r.length;i++){var s=r[i];if(s&&(s==="*"||s.toLowerCase()===n))return!0}return!1}function convertDataDescriptorToAccessor(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=n.value;return n.get=function(){return i},n.writable&&(n.set=function(o){return i=o}),delete n.value,delete n.writable,Object.defineProperty(t,e,n),n}function createArgumentsString(t){for(var e="",r=0;r<t;r++)e+=", arg"+r;return e.substr(2)}function createStackString(t){var e=this.name+": "+this.namespace;this.message&&(e+=" deprecated "+this.message);for(var r=0;r<t.length;r++)e+=`
    at `+callSiteToString(t[r]);return e}function depd(t){if(!t)throw new TypeError("argument namespace is required");var e=getStack(),r=callSiteLocation(e[1]),n=r[0];function i(s){log.call(i,s)}return i._file=n,i._ignored=isignored(t),i._namespace=t,i._traced=istraced(t),i._warned=Object.create(null),i.function=wrapfunction,i.property=wrapproperty,i}function isignored(t){if(process.noDeprecation)return!0;var e=process.env.NO_DEPRECATION||"";return containsNamespace(e,t)}function istraced(t){if(process.traceDeprecation)return!0;var e=process.env.TRACE_DEPRECATION||"";return containsNamespace(e,t)}function log(t,e){var r=eventListenerCount(process,"deprecation")!==0;if(!(!r&&this._ignored)){var n,i,s,o,a=0,u=!1,l=getStack(),f=this._file;for(e?(o=e,s=callSiteLocation(l[1]),s.name=o.name,f=s[0]):(a=2,o=callSiteLocation(l[a]),s=o);a<l.length;a++)if(n=callSiteLocation(l[a]),i=n[0],i===f)u=!0;else if(i===this._file)f=this._file;else if(u)break;var h=n?o.join(":")+"__"+n.join(":"):void 0;if(!(h!==void 0&&h in this._warned)){this._warned[h]=!0;var c=t;if(c||(c=s===o||!s.name?defaultMessage(o):defaultMessage(s)),r){var g=DeprecationError(this._namespace,c,l.slice(a));process.emit("deprecation",g);return}var m=process.stderr.isTTY?formatColor:formatPlain,b=m.call(this,c,n,l.slice(a));process.stderr.write(b+`
`,"utf8")}}}function callSiteLocation(t){var e=t.getFileName()||"<anonymous>",r=t.getLineNumber(),n=t.getColumnNumber();t.isEval()&&(e=t.getEvalOrigin()+", "+e);var i=[e,r,n];return i.callSite=t,i.name=t.getFunctionName(),i}function defaultMessage(t){var e=t.callSite,r=t.name;r||(r="<anonymous@"+formatLocation(t)+">");var n=e.getThis(),i=n&&e.getTypeName();return i==="Object"&&(i=void 0),i==="Function"&&(i=n.name||i),i&&e.getMethodName()?i+"."+r:r}function formatPlain(t,e,r){var n=new Date().toUTCString(),i=n+" "+this._namespace+" deprecated "+t;if(this._traced){for(var s=0;s<r.length;s++)i+=`
    at `+callSiteToString(r[s]);return i}return e&&(i+=" at "+formatLocation(e)),i}function formatColor(t,e,r){var n="[36;1m"+this._namespace+"[22;39m [33;1mdeprecated[22;39m [0m"+t+"[39m";if(this._traced){for(var i=0;i<r.length;i++)n+=`
    [36mat `+callSiteToString(r[i])+"[39m";return n}return e&&(n+=" [36m"+formatLocation(e)+"[39m"),n}function formatLocation(t){return relative(basePath,t[0])+":"+t[1]+":"+t[2]}function getStack(){var t=Error.stackTraceLimit,e={},r=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace,Error.stackTraceLimit=Math.max(10,t),Error.captureStackTrace(e);var n=e.stack.slice(1);return Error.prepareStackTrace=r,Error.stackTraceLimit=t,n}function prepareObjectStackTrace(t,e){return e}function wrapfunction(fn,message){if(typeof fn!="function")throw new TypeError("argument fn must be a function");var args=createArgumentsString(fn.length),deprecate=this,stack=getStack(),site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+`) {
"use strict"
log.call(deprecate, message, site)
return fn.apply(this, arguments)
})`);return deprecatedfn}function wrapproperty(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var i=this,s=getStack(),o=callSiteLocation(s[1]);o.name=e,"value"in n&&(n=convertDataDescriptorToAccessor(t,e,r));var a=n.get,u=n.set;typeof a=="function"&&(n.get=function(){return log.call(i,r,o),a.apply(this,arguments)}),typeof u=="function"&&(n.set=function(){return log.call(i,r,o),u.apply(this,arguments)}),Object.defineProperty(t,e,n)}function DeprecationError(t,e,r){var n=new Error,i;return Object.defineProperty(n,"constructor",{value:DeprecationError}),Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(n,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(n,"namespace",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,get:function(){return i!==void 0?i:i=createStackString.call(this,r)},set:function(o){i=o}}),n}});var Sa=d((gg,wa)=>{"use strict";wa.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?vd:md);function vd(t,e){return t.__proto__=e,t}function md(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}});var Ea=d((vg,yd)=>{yd.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var Ma=d((mg,Ra)=>{"use strict";var Ca=Ea();Ra.exports=$;$.STATUS_CODES=Ca;$.codes=_d($,Ca);$.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};$.empty={204:!0,205:!0,304:!0};$.retry={502:!0,503:!0,504:!0};function _d(t,e){var r=[];return Object.keys(e).forEach(function(i){var s=e[i],o=Number(i);t[o]=s,t[s]=o,t[s.toLowerCase()]=o,r.push(o)}),r}function $(t){if(typeof t=="number"){if(!$[t])throw new Error("invalid status code: "+t);return t}if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!$[e])throw new Error("invalid status code: "+e);return e}if(e=$[t.toLowerCase()],!e)throw new Error('invalid status message: "'+t+'"');return e}});var Aa=d((yg,Ta)=>{Ta.exports=bd;function bd(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}});var qa=d((_g,ge)=>{"use strict";var _n=ba()("http-errors"),Pa=Sa(),qe=Ma(),bn=fe(),wd=Aa();ge.exports=jt;ge.exports.HttpError=Sd();ge.exports.isHttpError=Cd(ge.exports.HttpError);Md(ge.exports,qe.codes,ge.exports.HttpError);function Oa(t){return Number(String(t).charAt(0)+"00")}function jt(){for(var t,e,r=500,n={},i=0;i<arguments.length;i++){var s=arguments[i];if(s instanceof Error){t=s,r=t.status||t.statusCode||r;continue}switch(typeof s){case"string":e=s;break;case"number":r=s,i!==0&&_n("non-first-argument status code; replace with createError("+s+", ...)");break;case"object":n=s;break}}typeof r=="number"&&(r<400||r>=600)&&_n("non-error status code; use only 4xx or 5xx status codes"),(typeof r!="number"||!qe[r]&&(r<400||r>=600))&&(r=500);var o=jt[r]||jt[Oa(r)];t||(t=o?new o(e):new Error(e||qe[r]),Error.captureStackTrace(t,jt)),(!o||!(t instanceof o)||t.status!==r)&&(t.expose=r<500,t.status=t.statusCode=r);for(var a in n)a!=="status"&&a!=="statusCode"&&(t[a]=n[a]);return t}function Sd(){function t(){throw new TypeError("cannot construct abstract class")}return bn(t,Error),t}function Ed(t,e,r){var n=xa(e);function i(s){var o=s!=null?s:qe[r],a=new Error(o);return Error.captureStackTrace(a,i),Pa(a,i.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),a}return bn(i,t),La(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!0,i}function Cd(t){return function(r){return!r||typeof r!="object"?!1:r instanceof t?!0:r instanceof Error&&typeof r.expose=="boolean"&&typeof r.statusCode=="number"&&r.status===r.statusCode}}function Rd(t,e,r){var n=xa(e);function i(s){var o=s!=null?s:qe[r],a=new Error(o);return Error.captureStackTrace(a,i),Pa(a,i.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),a}return bn(i,t),La(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!1,i}function La(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function Md(t,e,r){e.forEach(function(i){var s,o=wd(qe[i]);switch(Oa(i)){case 400:s=Ed(r,o,i);break;case 500:s=Rd(r,o,i);break}s&&(t[i]=s,t[o]=s)}),t["I'mateapot"]=_n.function(t.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function xa(t){return t.substr(-5)!=="Error"?t+"Error":t}});var ka=d(wn=>{"use strict";var Ia=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,Td=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,Da=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,Ad=/\\([\u000b\u0020-\u00ff])/g,Pd=/([\\"])/g,Na=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;wn.format=Od;wn.parse=Ld;function Od(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,r=t.type;if(!r||!Na.test(r))throw new TypeError("invalid type");var n=r;if(e&&typeof e=="object")for(var i,s=Object.keys(e).sort(),o=0;o<s.length;o++){if(i=s[o],!Da.test(i))throw new TypeError("invalid parameter name");n+="; "+i+"="+qd(e[i])}return n}function Ld(t){if(!t)throw new TypeError("argument string is required");var e=typeof t=="object"?xd(t):t;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var r=e.indexOf(";"),n=r!==-1?e.substr(0,r).trim():e.trim();if(!Na.test(n))throw new TypeError("invalid media type");var i=new Id(n.toLowerCase());if(r!==-1){var s,o,a;for(Ia.lastIndex=r;o=Ia.exec(e);){if(o.index!==r)throw new TypeError("invalid parameter format");r+=o[0].length,s=o[1].toLowerCase(),a=o[2],a[0]==='"'&&(a=a.substr(1,a.length-2).replace(Ad,"$1")),i.parameters[s]=a}if(r!==e.length)throw new TypeError("invalid parameter format")}return i}function xd(t){var e;if(typeof t.getHeader=="function"?e=t.getHeader("content-type"):typeof t.headers=="object"&&(e=t.headers&&t.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function qd(t){var e=String(t);if(Da.test(e))return e;if(e.length>0&&!Td.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(Pd,"\\$1")+'"'}function Id(t){this.parameters=Object.create(null),this.type=t}});var ja=d((wg,Ba)=>{var Dd=qa(),Nd=ka();Ba.exports=t=>({before:(e,r)=>{if(t=t||{},e.event.headers){let n=e.event.headers["content-type"]||e.event.headers["Content-Type"];if(n){let{type:i}=Nd.parse(n);if(i.match(/^application\/(.*\+)?json$/))try{let s=e.event.isBase64Encoded?Buffer.from(e.event.body,"base64").toString():e.event.body;e.event.body=JSON.parse(s,t.reviver)}catch(s){throw new Dd.UnprocessableEntity("Content type defined as JSON but an invalid JSON was provided")}}}r()}})});za(exports,{main:()=>jd});ri().install();var ra=Ft(ln());var id="database-1.c37ikd3aravz.us-east-2.rds.amazonaws.com",sd="postgres",od="password",ad=`postgresql://${sd}:${od}@${id}`,ta=ad;var dn=class{constructor(){this.pool=new ra.Pool({connectionString:ta,min:5,max:20})}async searchCards(e){let r=await this.pool.connect();try{let n=await r.query("SELECT * FROM searchCards($1)",[e]),i=n.rows;return n.rows.length>0?i.map(s=>({id:s.card_id,card_owner:s.card_owner,card_identifier:s.card_identifier,game:s.game,condition:s.card_condition,num_owned:s.num_owned,role:s.role})):[]}catch(n){throw n}finally{r.release()}}async getUserCards(e){let r=await this.pool.connect();try{let n=await r.query("SELECT * from getUserCards($1)",[e]),i=n.rows;return n.rows.length>0?i.map(s=>({id:s.card_id,card_owner:s.card_owner,card_identifier:s.card_identifier,game:s.game,condition:s.card_condition,num_owned:s.num_owned})):[]}catch(n){throw n}finally{r.release()}}async addUserCard(e,r,n,i){let s=await this.pool.connect();try{return await s.query("CALL addUserCard($1,$2,$3,$4)",[e,r,n,i]),!0}catch(o){return!1}finally{s.release()}}async removeUserCard(e,r,n){let i=await this.pool.connect();try{return await i.query("CALL removeUserCard($1,$2,$3)",[e,r,n]),!0}catch(s){return!1}finally{i.release()}}};var pn=t=>({statusCode:200,headers:{"Access-Control-Allow-Headers":"Content-Type, X-Amz-Date, Authorization, X-Api-Key, X-Amz-Security-Token, X-Amz-User-Agent","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"OPTIONS,POST,GET,PUT,PATCH,DELETE","Access-Control-Allow-Credentials":!1},body:JSON.stringify(t)});var Fa=Ft(pa()),Ua=Ft(ja()),Qa=t=>(0,Fa.default)(t).use((0,Ua.default)());var kd=new dn,Bd=async t=>{let{username:e}=t.pathParameters;try{let r=await kd.getUserCards(e);return pn({message:r,event:t})}catch(r){return pn({statusCode:400,message:`There were some complications: ${r}`})}},jd=Qa(Bd);0&&(module.exports={main});
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * depd
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * depd
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * depd
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
//# sourceMappingURL=handler.js.map
